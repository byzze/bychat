{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T14:10:18+08:00"}
[GIN-debug] Loaded HTML Templates (3): 
	- 
	- index copy.html
	- index.tpl

[GIN-debug] GET    /user/list                --> bychat/api/v1/user.GetRoomUserList (2 handlers)
[GIN-debug] POST   /user/sendMessageAll      --> bychat/api/v1/user.SendMessageAll (2 handlers)
[GIN-debug] GET    /user/historyMessageList  --> bychat/api/v1/user.HistoryMessageList (2 handlers)
[GIN-debug] GET    /system/state             --> bychat/api/v1/systems.Status (2 handlers)
[GIN-debug] GET    /home/index               --> bychat/api/v1/home.Index (2 handlers)
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
[GIN-debug] Environment variable PORT is undefined. Using port :8080 by default
[GIN-debug] Listening and serving HTTP on :8080
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T14:10:18+08:00"}
{"currentTime":1677651020,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T14:10:20+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:10:21+08:00"}
[GIN-debug] Loaded HTML Templates (3): 
	- 
	- index copy.html
	- index.tpl

[GIN-debug] GET    /user/list                --> bychat/api/v1/user.GetRoomUserList (2 handlers)
[GIN-debug] POST   /user/sendMessageAll      --> bychat/api/v1/user.SendMessageAll (2 handlers)
[GIN-debug] GET    /user/historyMessageList  --> bychat/api/v1/user.HistoryMessageList (2 handlers)
[GIN-debug] GET    /system/state             --> bychat/api/v1/systems.Status (2 handlers)
[GIN-debug] GET    /home/index               --> bychat/api/v1/home.Index (2 handlers)
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
[GIN-debug] Environment variable PORT is undefined. Using port :8080 by default
[GIN-debug] Listening and serving HTTP on :8080
[GIN-debug] Loaded HTML Templates (3): 
	- 
	- index copy.html
	- index.tpl

[GIN-debug] GET    /user/list                --> bychat/api/v1/user.GetRoomUserList (3 handlers)
[GIN-debug] POST   /user/sendMessageAll      --> bychat/api/v1/user.SendMessageAll (3 handlers)
[GIN-debug] GET    /user/historyMessageList  --> bychat/api/v1/user.HistoryMessageList (3 handlers)
[GIN-debug] GET    /system/state             --> bychat/api/v1/systems.Status (3 handlers)
[GIN-debug] GET    /home/index               --> bychat/api/v1/home.Index (3 handlers)
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://pkg.go.dev/github.com/gin-gonic/gin#readme-don-t-trust-all-proxies for details.
[GIN-debug] Environment variable PORT is undefined. Using port :8080 by default
[GIN-debug] Listening and serving HTTP on :8080
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T14:15:33+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T14:15:33+08:00"}
{"currentTime":1677651335,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T14:15:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:15:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:16:06+08:00"}
{"currentTime":1677651395,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T14:16:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:16:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:17:06+08:00"}
{"currentTime":1677651455,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T14:17:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:17:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:18:06+08:00"}
{"currentTime":1677651515,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T14:18:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:18:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:19:06+08:00"}
{"currentTime":1677651575,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T14:19:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:19:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:20:06+08:00"}
{"currentTime":1677651635,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T14:20:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:20:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:21:06+08:00"}
{"currentTime":1677651695,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T14:21:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:21:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:22:06+08:00"}
{"currentTime":1677651755,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T14:22:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:22:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:23:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T14:23:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:3.08 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T14:23:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T14:23:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:46134","time":"2023-03-01T14:23:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:231","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:46134","time":"2023-03-01T14:23:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677651806781-677335\",\"cmd\":\"login\",\"data\":{\"userID\":\"端华\",\"appID\":0}}","time":"2023-03-01T14:23:26+08:00"}
{"addr":"[::1]:46134","data":"{\"seq\":\"1677651806781-677335\",\"cmd\":\"login\",\"data\":{\"userID\":\"端华\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:23:26+08:00"}
{"Addr":"[::1]:46134","AppID":0,"RoomID":0,"UserId":"端华","cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:23:26+08:00"}
{"Addr":"[::1]:46134","RoomID":0,"UserID":"端华","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:247","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录","time":"2023-03-01T14:23:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677651806787-587172\",\"cmd\":\"enter\",\"data\":{\"userID\":\"端华\",\"roomID\":101}}","time":"2023-03-01T14:23:26+08:00"}
{"addr":"[::1]:46134","data":"{\"seq\":\"1677651806787-587172\",\"cmd\":\"enter\",\"data\":{\"userID\":\"端华\",\"roomID\":101}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:23:26+08:00"}
{"AppId":0,"RoomID":101,"UserId":"端华","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:103","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T14:23:26+08:00"}
{"Addr":"[::1]:46134","AppID":0,"RoomID":101,"UserId":"端华","cmd":"enter","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:23:26+08:00"}
{"Addr":"[::1]:46134","RoomID":101,"UserID":"端华","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:265","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T14:23:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T14:23:26+08:00","valByte":"[\"172.30.33.105:9001\",\"1677651755\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:105","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"790394061","roomID":101,"time":"2023-03-01T14:23:26+08:00","userID":"端华"}
{"appID":0,"data":"{\"seq\":\"790394061\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"端华\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:126","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T14:23:26+08:00","userID":"端华"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.36 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T14:23:26+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:33","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T14:23:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T14:23:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.3 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T14:23:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T14:23:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.62 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T14:23:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T14:23:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:42980","time":"2023-03-01T14:23:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:231","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:42980","time":"2023-03-01T14:23:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677651814863-782044\",\"cmd\":\"login\",\"data\":{\"userID\":\"韩悝\",\"appID\":0}}","time":"2023-03-01T14:23:34+08:00"}
{"addr":"[::1]:42980","data":"{\"seq\":\"1677651814863-782044\",\"cmd\":\"login\",\"data\":{\"userID\":\"韩悝\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:23:34+08:00"}
{"Addr":"[::1]:42980","AppID":0,"RoomID":0,"UserId":"韩悝","cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:23:34+08:00"}
{"Addr":"[::1]:42980","RoomID":0,"UserID":"韩悝","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:247","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录","time":"2023-03-01T14:23:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677651814867-452983\",\"cmd\":\"enter\",\"data\":{\"userID\":\"韩悝\",\"roomID\":101}}","time":"2023-03-01T14:23:34+08:00"}
{"addr":"[::1]:42980","data":"{\"seq\":\"1677651814867-452983\",\"cmd\":\"enter\",\"data\":{\"userID\":\"韩悝\",\"roomID\":101}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:23:34+08:00"}
{"AppId":0,"RoomID":101,"UserId":"韩悝","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:103","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T14:23:34+08:00"}
{"Addr":"[::1]:42980","AppID":0,"RoomID":101,"UserId":"韩悝","cmd":"enter","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:23:34+08:00"}
{"Addr":"[::1]:42980","RoomID":101,"UserID":"韩悝","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:265","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T14:23:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T14:23:34+08:00","valByte":"[\"172.30.33.105:9001\",\"1677651755\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:105","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"869223232","roomID":101,"time":"2023-03-01T14:23:34+08:00","userID":"韩悝"}
{"appID":0,"data":"{\"seq\":\"869223232\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"韩悝\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:126","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T14:23:34+08:00","userID":"韩悝"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.05 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T14:23:34+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:33","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T14:23:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T14:23:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.16 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T14:23:35+08:00"}
{"currentTime":1677651815,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T14:23:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:23:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677651837388-991931\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T14:23:57+08:00"}
{"addr":"[::1]:46134","data":"{\"seq\":\"1677651837388-991931\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:23:57+08:00"}
{"AppId":0,"RoomID":101,"UserId":"端华","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:68","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T14:23:57+08:00"}
{"Addr":"[::1]:46134","AppID":0,"RoomID":101,"UserId":"端华","cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:23:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677651844866-434254\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T14:24:04+08:00"}
{"addr":"[::1]:42980","data":"{\"seq\":\"1677651844866-434254\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:24:04+08:00"}
{"AppId":0,"RoomID":101,"UserId":"韩悝","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:68","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T14:24:04+08:00"}
{"Addr":"[::1]:42980","AppID":0,"RoomID":101,"UserId":"韩悝","cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:24:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:24:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677651867395-966489\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T14:24:27+08:00"}
{"addr":"[::1]:46134","data":"{\"seq\":\"1677651867395-966489\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:24:27+08:00"}
{"AppId":0,"RoomID":101,"UserId":"端华","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:68","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T14:24:27+08:00"}
{"Addr":"[::1]:46134","AppID":0,"RoomID":101,"UserId":"端华","cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:24:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677651874874-373038\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T14:24:34+08:00"}
{"addr":"[::1]:42980","data":"{\"seq\":\"1677651874874-373038\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:24:34+08:00"}
{"AppId":0,"RoomID":101,"UserId":"韩悝","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:68","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T14:24:34+08:00"}
{"Addr":"[::1]:42980","AppID":0,"RoomID":101,"UserId":"韩悝","cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:24:34+08:00"}
{"currentTime":1677651875,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T14:24:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:24:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677651897397-583173\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T14:24:57+08:00"}
{"addr":"[::1]:46134","data":"{\"seq\":\"1677651897397-583173\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:24:57+08:00"}
{"AppId":0,"RoomID":101,"UserId":"端华","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:68","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T14:24:57+08:00"}
{"Addr":"[::1]:46134","AppID":0,"RoomID":101,"UserId":"端华","cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:24:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677651904870-143876\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T14:25:04+08:00"}
{"addr":"[::1]:42980","data":"{\"seq\":\"1677651904870-143876\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:25:04+08:00"}
{"AppId":0,"RoomID":101,"UserId":"韩悝","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:68","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T14:25:04+08:00"}
{"Addr":"[::1]:42980","AppID":0,"RoomID":101,"UserId":"韩悝","cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:25:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:25:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T14:25:11+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T14:25:11+08:00"}
{"currentTime":1677651913,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T14:25:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T14:25:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.96 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T14:25:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:25:14+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T14:25:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.87 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T14:25:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T14:25:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:51438","time":"2023-03-01T14:25:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:231","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:51438","time":"2023-03-01T14:25:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677651926086-119648\",\"cmd\":\"login\",\"data\":{\"userID\":\"李牧\",\"appID\":0}}","time":"2023-03-01T14:25:26+08:00"}
{"addr":"[::1]:51438","data":"{\"seq\":\"1677651926086-119648\",\"cmd\":\"login\",\"data\":{\"userID\":\"李牧\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:25:26+08:00"}
{"Addr":"[::1]:51438","AppID":0,"RoomID":0,"UserId":"李牧","cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:25:26+08:00"}
{"Addr":"[::1]:51438","RoomID":0,"UserID":"李牧","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:247","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录","time":"2023-03-01T14:25:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677651926089-150559\",\"cmd\":\"enter\",\"data\":{\"userID\":\"李牧\",\"roomID\":101}}","time":"2023-03-01T14:25:26+08:00"}
{"addr":"[::1]:51438","data":"{\"seq\":\"1677651926089-150559\",\"cmd\":\"enter\",\"data\":{\"userID\":\"李牧\",\"roomID\":101}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:25:26+08:00"}
{"AppId":0,"RoomID":101,"UserId":"李牧","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:103","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T14:25:26+08:00"}
{"Addr":"[::1]:51438","AppID":0,"RoomID":101,"UserId":"李牧","cmd":"enter","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:25:26+08:00"}
{"Addr":"[::1]:51438","RoomID":101,"UserID":"李牧","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:265","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T14:25:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T14:25:26+08:00","valByte":"[\"172.30.33.105:9001\",\"1677651913\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:105","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"90869100","roomID":101,"time":"2023-03-01T14:25:26+08:00","userID":"李牧"}
{"appID":0,"data":"{\"seq\":\"90869100\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"李牧\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:126","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T14:25:26+08:00","userID":"李牧"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.16 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T14:25:26+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:33","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T14:25:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T14:25:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.37 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T14:25:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:25:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677651956097-762622\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T14:25:56+08:00"}
{"addr":"[::1]:51438","data":"{\"seq\":\"1677651956097-762622\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:25:56+08:00"}
{"AppId":0,"RoomID":101,"UserId":"李牧","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:68","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T14:25:56+08:00"}
{"Addr":"[::1]:51438","AppID":0,"RoomID":101,"UserId":"李牧","cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:25:56+08:00"}
{"currentTime":1677651973,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T14:26:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:26:14+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677651986101-197023\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T14:26:26+08:00"}
{"addr":"[::1]:51438","data":"{\"seq\":\"1677651986101-197023\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:26:26+08:00"}
{"AppId":0,"RoomID":101,"UserId":"李牧","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:68","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T14:26:26+08:00"}
{"Addr":"[::1]:51438","AppID":0,"RoomID":101,"UserId":"李牧","cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:26:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:26:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677652016100-451591\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T14:26:56+08:00"}
{"addr":"[::1]:51438","data":"{\"seq\":\"1677652016100-451591\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:43","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T14:26:56+08:00"}
{"AppId":0,"RoomID":101,"UserId":"李牧","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:68","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T14:26:56+08:00"}
{"Addr":"[::1]:51438","AppID":0,"RoomID":101,"UserId":"李牧","cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:96","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"acc_response send","time":"2023-03-01T14:26:56+08:00"}
{"currentTime":1677652033,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T14:27:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T14:27:14+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T15:35:17+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T15:35:17+08:00"}
{"currentTime":1677656119,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T15:35:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:35:20+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T15:35:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.61 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T15:35:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T15:35:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:58692","time":"2023-03-01T15:35:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:58692","time":"2023-03-01T15:35:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677656121668-380585\",\"cmd\":\"login\",\"data\":{\"userID\":\"赤老温\",\"appID\":0}}","time":"2023-03-01T15:35:21+08:00"}
{"addr":"[::1]:58692","data":"{\"seq\":\"1677656121668-380585\",\"cmd\":\"login\",\"data\":{\"userID\":\"赤老温\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:35:21+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU2MTIxNjY4LTM4MDU4NSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T15:35:21+08:00"}
{"Addr":"[::1]:58692","RoomID":0,"UserID":"赤老温","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T15:35:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677656121672-828681\",\"cmd\":\"enter\",\"data\":{\"userID\":\"赤老温\",\"roomID\":101}}","time":"2023-03-01T15:35:21+08:00"}
{"addr":"[::1]:58692","data":"{\"seq\":\"1677656121672-828681\",\"cmd\":\"enter\",\"data\":{\"userID\":\"赤老温\",\"roomID\":101}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:35:21+08:00"}
{"AppId":0,"RoomID":101,"UserId":"赤老温","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:126","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T15:35:21+08:00"}
{"cmd":"enter","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU2MTIxNjcyLTgyODY4MSIsImNtZCI6ImVudGVyIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T15:35:21+08:00"}
{"Addr":"[::1]:58692","RoomID":101,"UserID":"赤老温","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T15:35:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T15:35:21+08:00","valByte":"[\"172.30.33.105:9001\",\"1677656119\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:105","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"674046723","roomID":101,"time":"2023-03-01T15:35:21+08:00","userID":"赤老温"}
{"appID":0,"data":"{\"seq\":\"674046723\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"赤老温\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:126","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T15:35:21+08:00","userID":"赤老温"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.15 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T15:35:21+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:33","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T15:35:22+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T15:35:22+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.22 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T15:35:22+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:35:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677656151678-434112\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T15:35:51+08:00"}
{"addr":"[::1]:58692","data":"{\"seq\":\"1677656151678-434112\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:35:51+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T15:35:51+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677656121,"IsLogoff":false,"LoginTime":1677656121,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T15:35:51+08:00","userKey":"0_赤老温"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU2MTUxNjc4LTQzNDExMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T15:35:51+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T15:49:29+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T15:49:29+08:00"}
{"currentTime":1677656971,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T15:49:31+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T15:49:31+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:3.58 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T15:49:31+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T15:49:31+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:45224","time":"2023-03-01T15:49:31+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:45224","time":"2023-03-01T15:49:31+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677656972068-537920\",\"cmd\":\"login\",\"data\":{\"userID\":\"庞涓\",\"appID\":0}}","time":"2023-03-01T15:49:32+08:00"}
{"addr":"[::1]:45224","data":"{\"seq\":\"1677656972068-537920\",\"cmd\":\"login\",\"data\":{\"userID\":\"庞涓\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:49:32+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU2OTcyMDY4LTUzNzkyMCIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T15:49:32+08:00"}
{"Addr":"[::1]:45224","RoomID":0,"UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T15:49:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.23 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T15:49:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.12 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T15:49:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:49:32+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T15:49:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T15:49:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.35 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T15:49:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657002079-320502\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T15:50:02+08:00"}
{"addr":"[::1]:45224","data":"{\"seq\":\"1677657002079-320502\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:50:02+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T15:50:02+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677656972,"IsLogoff":false,"LoginTime":1677656972,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T15:50:02+08:00","userKey":"0_庞涓"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3MDAyMDc5LTMyMDUwMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T15:50:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:50:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T15:53:24+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T15:53:24+08:00"}
{"currentTime":1677657206,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T15:53:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T15:53:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.95 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T15:53:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T15:53:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:54202","time":"2023-03-01T15:53:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:54202","time":"2023-03-01T15:53:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657206988-950483\",\"cmd\":\"login\",\"data\":{\"userID\":\"曹植\",\"appID\":0}}","time":"2023-03-01T15:53:26+08:00"}
{"addr":"[::1]:54202","data":"{\"seq\":\"1677657206988-950483\",\"cmd\":\"login\",\"data\":{\"userID\":\"曹植\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:53:26+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3MjA2OTg4LTk1MDQ4MyIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T15:53:26+08:00"}
{"Addr":"[::1]:54202","RoomID":0,"UserID":"曹植","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T15:53:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.11 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T15:53:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.06 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T15:53:27+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T15:53:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T15:53:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.31 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T15:53:27+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T15:53:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T15:53:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.58 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T15:53:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:53:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657236989-375956\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T15:53:56+08:00"}
{"addr":"[::1]:54202","data":"{\"seq\":\"1677657236989-375956\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:53:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T15:53:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677657206,"IsLogoff":false,"LoginTime":1677657206,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T15:53:56+08:00","userKey":"0_曹植"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3MjM2OTg5LTM3NTk1NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T15:53:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:53:57+08:00"}
{"currentTime":1677657266,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T15:54:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657267004-411846\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T15:54:27+08:00"}
{"addr":"[::1]:54202","data":"{\"seq\":\"1677657267004-411846\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:54:27+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T15:54:27+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677657236,"IsLogoff":false,"LoginTime":1677657206,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T15:54:27+08:00","userKey":"0_曹植"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3MjY3MDA0LTQxMTg0NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T15:54:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:54:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657297000-433589\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T15:54:57+08:00"}
{"addr":"[::1]:54202","data":"{\"seq\":\"1677657297000-433589\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:54:57+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T15:54:57+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677657267,"IsLogoff":false,"LoginTime":1677657206,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T15:54:57+08:00","userKey":"0_曹植"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3Mjk3MDAwLTQzMzU4OSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T15:54:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:54:57+08:00"}
{"currentTime":1677657326,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T15:55:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657327003-382486\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T15:55:27+08:00"}
{"addr":"[::1]:54202","data":"{\"seq\":\"1677657327003-382486\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:55:27+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T15:55:27+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677657297,"IsLogoff":false,"LoginTime":1677657206,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T15:55:27+08:00","userKey":"0_曹植"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3MzI3MDAzLTM4MjQ4NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T15:55:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:55:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657356992-870754\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T15:55:56+08:00"}
{"addr":"[::1]:54202","data":"{\"seq\":\"1677657356992-870754\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:55:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T15:55:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677657327,"IsLogoff":false,"LoginTime":1677657206,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T15:55:56+08:00","userKey":"0_曹植"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3MzU2OTkyLTg3MDc1NCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T15:55:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:55:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T15:56:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T15:56:18+08:00"}
{"currentTime":1677657380,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T15:56:20+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:56:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:56:51+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T15:57:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:3.02 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T15:57:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T15:57:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:53552","time":"2023-03-01T15:57:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:53552","time":"2023-03-01T15:57:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657424491-278322\",\"cmd\":\"login\",\"data\":{\"userID\":\"刘松年\",\"appID\":0}}","time":"2023-03-01T15:57:04+08:00"}
{"addr":"[::1]:53552","data":"{\"seq\":\"1677657424491-278322\",\"cmd\":\"login\",\"data\":{\"userID\":\"刘松年\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:57:04+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3NDI0NDkxLTI3ODMyMiIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T15:57:04+08:00"}
{"Addr":"[::1]:53552","RoomID":0,"UserID":"刘松年","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T15:57:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.12 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T15:57:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.06 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T15:57:04+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T15:57:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T15:57:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.22 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T15:57:04+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T15:57:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T15:57:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.28 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T15:57:04+08:00"}
{"currentTime":1677657440,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T15:57:20+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:57:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657454499-219313\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T15:57:34+08:00"}
{"addr":"[::1]:53552","data":"{\"seq\":\"1677657454499-219313\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:57:34+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T15:57:34+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677657424,"IsLogoff":false,"LoginTime":1677657424,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T15:57:34+08:00","userKey":"0_刘松年"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3NDU0NDk5LTIxOTMxMyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T15:57:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:57:51+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/systems/system.go:17","func":"bychat/api/v1/systems.Status","level":"info","msg":"http_request 查询系统状态","time":"2023-03-01T15:57:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.21 method:GET statusCode:200 uri:/system/state]","time":"2023-03-01T15:57:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657485383-385911\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T15:58:05+08:00"}
{"addr":"[::1]:53552","data":"{\"seq\":\"1677657485383-385911\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:58:05+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T15:58:05+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677657454,"IsLogoff":false,"LoginTime":1677657424,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T15:58:05+08:00","userKey":"0_刘松年"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3NDg1MzgzLTM4NTkxMSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T15:58:05+08:00"}
{"currentTime":1677657500,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T15:58:20+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:58:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657515397-776623\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T15:58:35+08:00"}
{"addr":"[::1]:53552","data":"{\"seq\":\"1677657515397-776623\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:58:35+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T15:58:35+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677657485,"IsLogoff":false,"LoginTime":1677657424,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T15:58:35+08:00","userKey":"0_刘松年"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3NTE1Mzk3LTc3NjYyMyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T15:58:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T15:58:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T15:58:59+08:00"}
{"currentTime":1677657541,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T15:59:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:59:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T15:59:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:3.39 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T15:59:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T15:59:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:43966","time":"2023-03-01T15:59:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:43966","time":"2023-03-01T15:59:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657553697-324820\",\"cmd\":\"login\",\"data\":{\"userID\":\"祝枝山\",\"appID\":0}}","time":"2023-03-01T15:59:13+08:00"}
{"addr":"[::1]:43966","data":"{\"seq\":\"1677657553697-324820\",\"cmd\":\"login\",\"data\":{\"userID\":\"祝枝山\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:59:13+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3NTUzNjk3LTMyNDgyMCIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T15:59:13+08:00"}
{"Addr":"[::1]:43966","RoomID":0,"UserID":"祝枝山","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T15:59:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.4 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T15:59:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.54 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T15:59:13+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T15:59:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T15:59:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.37 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T15:59:13+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T15:59:14+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T15:59:14+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:7.76 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T15:59:14+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T15:59:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657583707-951890\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T15:59:43+08:00"}
{"addr":"[::1]:43966","data":"{\"seq\":\"1677657583707-951890\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T15:59:43+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T15:59:43+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677657553,"IsLogoff":false,"LoginTime":1677657553,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T15:59:43+08:00","userKey":"0_祝枝山"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3NTgzNzA3LTk1MTg5MCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T15:59:43+08:00"}
{"currentTime":1677657601,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:00:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:00:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657613705-260424\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:00:13+08:00"}
{"addr":"[::1]:43966","data":"{\"seq\":\"1677657613705-260424\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:00:13+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:00:13+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677657583,"IsLogoff":false,"LoginTime":1677657553,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:00:13+08:00","userKey":"0_祝枝山"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3NjEzNzA1LTI2MDQyNCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:00:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:00:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:00:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:00:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:00:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:8.08 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:00:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:00:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:55104","time":"2023-03-01T16:00:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:55104","time":"2023-03-01T16:00:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657646789-977179\",\"cmd\":\"login\",\"data\":{\"userID\":\"王夫之\",\"appID\":0}}","time":"2023-03-01T16:00:46+08:00"}
{"addr":"[::1]:55104","data":"{\"seq\":\"1677657646789-977179\",\"cmd\":\"login\",\"data\":{\"userID\":\"王夫之\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:00:46+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3NjQ2Nzg5LTk3NzE3OSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:00:46+08:00"}
{"Addr":"[::1]:55104","RoomID":0,"UserID":"王夫之","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:00:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.24 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:00:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.12 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:00:46+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:00:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:00:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.31 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:00:46+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:00:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:00:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.3 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:00:47+08:00"}
{"currentTime":1677657648,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:00:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:00:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657676801-419268\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:01:16+08:00"}
{"addr":"[::1]:55104","data":"{\"seq\":\"1677657676801-419268\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:01:16+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:01:16+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677657646,"IsLogoff":false,"LoginTime":1677657646,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:01:16+08:00","userKey":"0_王夫之"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3Njc2ODAxLTQxOTI2OCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:01:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:01:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657706795-442357\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:01:46+08:00"}
{"addr":"[::1]:55104","data":"{\"seq\":\"1677657706795-442357\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:01:46+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:01:46+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677657676,"IsLogoff":false,"LoginTime":1677657646,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:01:46+08:00","userKey":"0_王夫之"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3NzA2Nzk1LTQ0MjM1NyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:01:46+08:00"}
{"currentTime":1677657708,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:01:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:01:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:02:14+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:02:14+08:00"}
{"currentTime":1677657736,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:02:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:02:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:3.14 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:02:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:02:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:40206","time":"2023-03-01T16:02:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:40206","time":"2023-03-01T16:02:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657736509-506275\",\"cmd\":\"login\",\"data\":{\"userID\":\"冉雍\",\"appID\":0}}","time":"2023-03-01T16:02:16+08:00"}
{"addr":"[::1]:40206","data":"{\"seq\":\"1677657736509-506275\",\"cmd\":\"login\",\"data\":{\"userID\":\"冉雍\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:02:16+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3NzM2NTA5LTUwNjI3NSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:02:16+08:00"}
{"Addr":"[::1]:40206","RoomID":0,"UserID":"冉雍","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:02:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:110","func":"bychat/api/v1/user.EnterRoom","level":"error","msg":"EnterRoom Param FailedKey: 'Param.AppID' Error:Field validation for 'AppID' failed on the 'required' tag\nKey: 'Param.RoomID' Error:Field validation for 'RoomID' failed on the 'required' tag","time":"2023-03-01T16:02:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.73 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:02:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.09 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:02:16+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:02:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:02:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.4 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:02:16+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:02:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:02:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.23 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:02:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:02:17+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:02:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.78 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:02:30+08:00"}
{"Addr":"[::1]:40206","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:02:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:40206 0xc000150420 0xc00009d0e0 1677657736 1677657736 1677657736 0xc0007122d0}","time":"2023-03-01T16:02:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:02:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:42270","time":"2023-03-01T16:02:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:42270","time":"2023-03-01T16:02:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657750785-883058\",\"cmd\":\"login\",\"data\":{\"userID\":\"苏洵\",\"appID\":0}}","time":"2023-03-01T16:02:30+08:00"}
{"addr":"[::1]:42270","data":"{\"seq\":\"1677657750785-883058\",\"cmd\":\"login\",\"data\":{\"userID\":\"苏洵\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:02:30+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3NzUwNzg1LTg4MzA1OCIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:02:30+08:00"}
{"Addr":"[::1]:42270","RoomID":0,"UserID":"苏洵","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:02:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:03:51+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:03:51+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:03:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:2.34 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:03:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:03:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:34174","time":"2023-03-01T16:03:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:34174","time":"2023-03-01T16:03:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657833310-733191\",\"cmd\":\"login\",\"data\":{\"userID\":\"郑光祖\",\"appID\":0}}","time":"2023-03-01T16:03:53+08:00"}
{"addr":"[::1]:34174","data":"{\"seq\":\"1677657833310-733191\",\"cmd\":\"login\",\"data\":{\"userID\":\"郑光祖\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:03:53+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3ODMzMzEwLTczMzE5MSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:03:53+08:00"}
{"Addr":"[::1]:34174","RoomID":0,"UserID":"郑光祖","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:03:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:110","func":"bychat/api/v1/user.EnterRoom","level":"error","msg":"EnterRoom Param FailedKey: 'Param.AppID' Error:Field validation for 'AppID' failed on the 'required' tag\nKey: 'Param.RoomID' Error:Field validation for 'RoomID' failed on the 'required' tag","time":"2023-03-01T16:03:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.63 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:03:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.16 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:03:53+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:03:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:03:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:2.35 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:03:53+08:00"}
{"currentTime":1677657833,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:03:53+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:03:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:03:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.3 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:03:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:03:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:05:20+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:05:20+08:00"}
{"currentTime":1677657922,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:05:22+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:05:23+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:60","func":"bychat/api/v1/user.SendMessageAll","level":"info","message":"sdaf","msg":"SendMessageAll","msgID":"1677657925012-961672","roomID":101,"time":"2023-03-01T16:05:25+08:00","userID":"郑光祖"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:05:25+08:00","valByte":"[\"172.30.33.105:9001\",\"1677657922\"]"}
{"appID":0,"cmd":"msg","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"sdaf","msg":"SendUserMessageAll","msgID":"1677657925012-961672","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:05:25+08:00","userID":"郑光祖"}
{"appID":0,"data":"{\"seq\":\"1677657925012-961672\",\"cmd\":\"msg\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"sdaf\",\"from\":\"郑光祖\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:05:25+08:00","userID":"郑光祖"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.44 method:POST statusCode:200 uri:/user/sendMessageAll]","time":"2023-03-01T16:05:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:06:11+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:06:11+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:06:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.87 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:06:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:06:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:42188","time":"2023-03-01T16:06:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:42188","time":"2023-03-01T16:06:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677657973195-812528\",\"cmd\":\"login\",\"data\":{\"userID\":\"李清照\",\"appID\":0}}","time":"2023-03-01T16:06:13+08:00"}
{"addr":"[::1]:42188","data":"{\"seq\":\"1677657973195-812528\",\"cmd\":\"login\",\"data\":{\"userID\":\"李清照\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:06:13+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU3OTczMTk1LTgxMjUyOCIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:06:13+08:00"}
{"Addr":"[::1]:42188","RoomID":0,"UserID":"李清照","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:06:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:110","func":"bychat/api/v1/user.EnterRoom","level":"error","msg":"EnterRoom Param FailedKey: 'Param.AppID' Error:Field validation for 'AppID' failed on the 'required' tag\nKey: 'Param.RoomID' Error:Field validation for 'RoomID' failed on the 'required' tag","time":"2023-03-01T16:06:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.28 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:06:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.04 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:06:13+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:06:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:06:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.43 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:06:13+08:00"}
{"currentTime":1677657973,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:06:13+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:06:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:06:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.52 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:06:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:06:14+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:06:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:06:44+08:00"}
{"currentTime":1677658006,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:06:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:06:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:06:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:3.42 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:06:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:06:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:40816","time":"2023-03-01T16:06:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:40816","time":"2023-03-01T16:06:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658012916-668970\",\"cmd\":\"login\",\"data\":{\"userID\":\"郭凯\",\"appID\":0}}","time":"2023-03-01T16:06:52+08:00"}
{"addr":"[::1]:40816","data":"{\"seq\":\"1677658012916-668970\",\"cmd\":\"login\",\"data\":{\"userID\":\"郭凯\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:06:52+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4MDEyOTE2LTY2ODk3MCIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:06:52+08:00"}
{"Addr":"[::1]:40816","RoomID":0,"UserID":"郭凯","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:06:52+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:06:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:06:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:34.28 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:06:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:34.8 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:06:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:110","func":"bychat/api/v1/user.EnterRoom","level":"error","msg":"EnterRoom Param FailedKey: 'Param.AppID' Error:Field validation for 'AppID' failed on the 'required' tag\nKey: 'Param.RoomID' Error:Field validation for 'RoomID' failed on the 'required' tag","time":"2023-03-01T16:07:03+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:08:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:08:52+08:00"}
{"currentTime":1677658134,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:08:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:08:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:2.89 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:08:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:08:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:42574","time":"2023-03-01T16:08:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:42574","time":"2023-03-01T16:08:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658135565-397851\",\"cmd\":\"login\",\"data\":{\"userID\":\"司马迁\",\"appID\":0}}","time":"2023-03-01T16:08:55+08:00"}
{"addr":"[::1]:42574","data":"{\"seq\":\"1677658135565-397851\",\"cmd\":\"login\",\"data\":{\"userID\":\"司马迁\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:08:55+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4MTM1NTY1LTM5Nzg1MSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:08:55+08:00"}
{"Addr":"[::1]:42574","RoomID":0,"UserID":"司马迁","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:08:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:110","func":"bychat/api/v1/user.EnterRoom","level":"error","msg":"EnterRoom Param FailedKey: 'Param.AppID' Error:Field validation for 'AppID' failed on the 'required' tag","time":"2023-03-01T16:08:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.28 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:08:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.06 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:08:55+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:08:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:08:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.28 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:08:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:08:55+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:08:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:08:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.33 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:08:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:13:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:13:16+08:00"}
{"currentTime":1677658398,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:13:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:13:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:13:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.8 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:13:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:13:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:53092","time":"2023-03-01T16:13:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:53092","time":"2023-03-01T16:13:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658399984-699399\",\"cmd\":\"login\",\"data\":{\"userID\":\"孟尝君田文\",\"appID\":0}}","time":"2023-03-01T16:13:19+08:00"}
{"addr":"[::1]:53092","data":"{\"seq\":\"1677658399984-699399\",\"cmd\":\"login\",\"data\":{\"userID\":\"孟尝君田文\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:13:19+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4Mzk5OTg0LTY5OTM5OSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:13:19+08:00"}
{"Addr":"[::1]:53092","RoomID":0,"UserID":"孟尝君田文","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:13:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.48 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:13:20+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:13:20+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:13:20+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.25 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:13:20+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:13:20+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:13:20+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.19 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:13:20+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:13:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:13:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:13:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:5.03 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:13:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:13:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:50958","time":"2023-03-01T16:13:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:50958","time":"2023-03-01T16:13:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658432455-884248\",\"cmd\":\"login\",\"data\":{\"userID\":\"尧\",\"appID\":0}}","time":"2023-03-01T16:13:52+08:00"}
{"addr":"[::1]:50958","data":"{\"seq\":\"1677658432455-884248\",\"cmd\":\"login\",\"data\":{\"userID\":\"尧\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:13:52+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4NDMyNDU1LTg4NDI0OCIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:13:52+08:00"}
{"Addr":"[::1]:50958","RoomID":0,"UserID":"尧","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:13:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:110","func":"bychat/api/v1/user.EnterRoom","level":"error","msg":"EnterRoom Param Failedinvalid character 'r' looking for beginning of value","time":"2023-03-01T16:13:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.58 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:13:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.38 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:13:52+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:13:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:13:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.79 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:13:52+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:13:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:13:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.28 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:13:52+08:00"}
{"currentTime":1677658432,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:13:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:13:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:18:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:18:53+08:00"}
{"currentTime":1677658735,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:18:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:18:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:18:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:3.17 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:18:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:18:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:36910","time":"2023-03-01T16:18:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:36910","time":"2023-03-01T16:18:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658738663-141058\",\"cmd\":\"login\",\"data\":{\"userID\":\"李清照\",\"appID\":0}}","time":"2023-03-01T16:18:58+08:00"}
{"addr":"[::1]:36910","data":"{\"seq\":\"1677658738663-141058\",\"cmd\":\"login\",\"data\":{\"userID\":\"李清照\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:18:58+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4NzM4NjYzLTE0MTA1OCIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:18:58+08:00"}
{"Addr":"[::1]:36910","RoomID":0,"UserID":"李清照","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:18:58+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:19:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:19:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:110","func":"bychat/api/v1/user.EnterRoom","level":"error","msg":"EnterRoom Param FailedKey: 'Param.AppID' Error:Field validation for 'AppID' failed on the 'required' tag","time":"2023-03-01T16:19:09+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658768664-313078\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:19:28+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:19:28+08:00"}
{"addr":"[::1]:36910","data":"{\"seq\":\"1677658768664-313078\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:19:28+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:19:28+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:19:28+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:19:28+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677658738,"IsLogoff":false,"LoginTime":1677658738,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:19:28+08:00","userKey":"0_李清照"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4NzY4NjY0LTMxMzA3OCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:19:28+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:32328.8 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:19:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:32328.74 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:19:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:36429.09 method:POST statusCode:400 uri:/user/enter]","time":"2023-03-01T16:19:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:6300.58 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:19:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:19:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:19:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:19:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:6.2 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:19:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:19:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:59378","time":"2023-03-01T16:19:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:59378","time":"2023-03-01T16:19:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658794171-198097\",\"cmd\":\"login\",\"data\":{\"userID\":\"虞世南\",\"appID\":0}}","time":"2023-03-01T16:19:54+08:00"}
{"addr":"[::1]:59378","data":"{\"seq\":\"1677658794171-198097\",\"cmd\":\"login\",\"data\":{\"userID\":\"虞世南\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:19:54+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4Nzk0MTcxLTE5ODA5NyIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:19:54+08:00"}
{"Addr":"[::1]:59378","RoomID":0,"UserID":"虞世南","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:19:54+08:00"}
{"currentTime":1677658794,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:19:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:110","func":"bychat/api/v1/user.EnterRoom","level":"error","msg":"EnterRoom Param FailedKey: 'Param.AppID' Error:Field validation for 'AppID' failed on the 'required' tag","time":"2023-03-01T16:19:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.43 method:POST statusCode:400 uri:/user/enter]","time":"2023-03-01T16:19:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.16 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:19:54+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:19:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:19:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.53 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:19:54+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:19:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:19:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.52 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:19:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:19:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:20:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:20:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:20:15+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:4.42 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:20:15+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:20:15+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:60056","time":"2023-03-01T16:20:15+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:60056","time":"2023-03-01T16:20:15+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658815390-638481\",\"cmd\":\"login\",\"data\":{\"userID\":\"东海王越\",\"appID\":0}}","time":"2023-03-01T16:20:15+08:00"}
{"addr":"[::1]:60056","data":"{\"seq\":\"1677658815390-638481\",\"cmd\":\"login\",\"data\":{\"userID\":\"东海王越\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:20:15+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4ODE1MzkwLTYzODQ4MSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:20:15+08:00"}
{"Addr":"[::1]:60056","RoomID":0,"UserID":"东海王越","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:20:15+08:00"}
{"AppId":0,"RoomID":101,"UserId":"东海王越","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:20:15+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.46 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:20:15+08:00"}
{"Addr":"[::1]:60056","RoomID":101,"UserID":"东海王越","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:20:15+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:20:15+08:00","valByte":"[\"172.30.33.105:9001\",\"1677658794\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"524372719","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:20:15+08:00","userID":"东海王越"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:20:15+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:20:15+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.43 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:20:15+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:4.36 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:20:15+08:00"}
{"appID":0,"data":"{\"seq\":\"524372719\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"东海王越\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:20:15+08:00","userID":"东海王越"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:20:15+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:20:15+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.3 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:20:15+08:00"}
{"currentTime":1677658815,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:20:15+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:20:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:20:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.86 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:20:34+08:00"}
{"Addr":"[::1]:60056","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:20:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:60056 0xc0005e2420 0xc000486120 1677658815 1677658815 1677658815 0xc0007a0480}","time":"2023-03-01T16:20:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:20:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:55412","time":"2023-03-01T16:20:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:55412","time":"2023-03-01T16:20:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658834785-795611\",\"cmd\":\"login\",\"data\":{\"userID\":\"冯芳\",\"appID\":0}}","time":"2023-03-01T16:20:34+08:00"}
{"addr":"[::1]:55412","data":"{\"seq\":\"1677658834785-795611\",\"cmd\":\"login\",\"data\":{\"userID\":\"冯芳\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:20:34+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4ODM0Nzg1LTc5NTYxMSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:20:34+08:00"}
{"Addr":"[::1]:55412","RoomID":0,"UserID":"冯芳","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:20:34+08:00"}
{"AppId":0,"RoomID":101,"UserId":"冯芳","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:20:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.34 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:20:34+08:00"}
{"Addr":"[::1]:55412","RoomID":101,"UserID":"冯芳","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:20:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:20:34+08:00","valByte":"[\"172.30.33.105:9001\",\"1677658815\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"858933101","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:20:34+08:00","userID":"冯芳"}
{"appID":0,"data":"{\"seq\":\"858933101\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"冯芳\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:20:34+08:00","userID":"冯芳"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:20:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:20:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.01 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:20:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.98 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:20:34+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:20:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:20:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.49 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:20:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:20:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:21:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:21:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:21:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:5.47 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:21:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:21:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:38548","time":"2023-03-01T16:21:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:38548","time":"2023-03-01T16:21:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658907251-550667\",\"cmd\":\"login\",\"data\":{\"userID\":\"狄黑\",\"appID\":0}}","time":"2023-03-01T16:21:47+08:00"}
{"addr":"[::1]:38548","data":"{\"seq\":\"1677658907251-550667\",\"cmd\":\"login\",\"data\":{\"userID\":\"狄黑\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:21:47+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4OTA3MjUxLTU1MDY2NyIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:21:47+08:00"}
{"Addr":"[::1]:38548","RoomID":0,"UserID":"狄黑","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:21:47+08:00"}
{"AppId":0,"RoomID":101,"UserId":"狄黑","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:21:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.41 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:21:47+08:00"}
{"Addr":"[::1]:38548","RoomID":101,"UserID":"狄黑","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:21:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:21:47+08:00","valByte":"[\"172.30.33.105:9001\",\"1677658815\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"480953988","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:21:47+08:00","userID":"狄黑"}
{"appID":0,"data":"{\"seq\":\"480953988\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"狄黑\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:21:47+08:00","userID":"狄黑"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.91 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:21:47+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:21:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:21:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.38 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:21:47+08:00"}
{"currentTime":1677658908,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:21:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:21:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:21:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.42 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:21:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:21:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:59394","time":"2023-03-01T16:21:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:59394","time":"2023-03-01T16:21:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658917330-743581\",\"cmd\":\"login\",\"data\":{\"userID\":\"程颐\",\"appID\":0}}","time":"2023-03-01T16:21:57+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677658917330-743581\",\"cmd\":\"login\",\"data\":{\"userID\":\"程颐\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:21:57+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4OTE3MzMwLTc0MzU4MSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:21:57+08:00"}
{"Addr":"[::1]:59394","RoomID":0,"UserID":"程颐","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:21:57+08:00"}
{"AppId":0,"RoomID":101,"UserId":"程颐","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:21:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.58 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:21:57+08:00"}
{"Addr":"[::1]:59394","RoomID":101,"UserID":"程颐","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:21:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:21:57+08:00","valByte":"[\"172.30.33.105:9001\",\"1677658908\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"434560470","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:21:57+08:00","userID":"程颐"}
{"appID":0,"data":"{\"seq\":\"434560470\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"程颐\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:21:57+08:00","userID":"程颐"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.73 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:21:57+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:21:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:21:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.24 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:21:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:22:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.25 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:22:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:22:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:38354","time":"2023-03-01T16:22:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:38354","time":"2023-03-01T16:22:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658933416-881279\",\"cmd\":\"login\",\"data\":{\"userID\":\"颜高\",\"appID\":0}}","time":"2023-03-01T16:22:13+08:00"}
{"addr":"[::1]:38354","data":"{\"seq\":\"1677658933416-881279\",\"cmd\":\"login\",\"data\":{\"userID\":\"颜高\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:22:13+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4OTMzNDE2LTg4MTI3OSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:22:13+08:00"}
{"Addr":"[::1]:38354","RoomID":0,"UserID":"颜高","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:22:13+08:00"}
{"AppId":0,"RoomID":101,"UserId":"颜高","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:22:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.31 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:22:13+08:00"}
{"Addr":"[::1]:38354","RoomID":101,"UserID":"颜高","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:22:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.47 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:22:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:22:13+08:00","valByte":"[\"172.30.33.105:9001\",\"1677658908\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"458239656","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:22:13+08:00","userID":"颜高"}
{"appID":0,"data":"{\"seq\":\"458239656\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"颜高\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:22:13+08:00","userID":"颜高"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:22:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:22:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.29 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:22:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658937382-829758\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:22:17+08:00"}
{"addr":"[::1]:38548","data":"{\"seq\":\"1677658937382-829758\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:22:17+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:22:17+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677658907,"IsLogoff":false,"LoginTime":1677658907,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:22:17+08:00","userKey":"0_狄黑"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4OTM3MzgyLTgyOTc1OCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:22:17+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:22:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:60","func":"bychat/api/v1/user.SendMessageAll","level":"info","message":"是是是","msg":"SendMessageAll","msgID":"1677658943005-772806","roomID":101,"time":"2023-03-01T16:22:23+08:00","userID":"颜高"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:22:23+08:00","valByte":"[\"172.30.33.105:9001\",\"1677658908\"]"}
{"appID":0,"cmd":"msg","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"是是是","msg":"SendUserMessageAll","msgID":"1677658943005-772806","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:22:23+08:00","userID":"颜高"}
{"appID":0,"data":"{\"seq\":\"1677658943005-772806\",\"cmd\":\"msg\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"是是是\",\"from\":\"颜高\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:22:23+08:00","userID":"颜高"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.67 method:POST statusCode:200 uri:/user/sendMessageAll]","time":"2023-03-01T16:22:23+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658947397-311188\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:22:27+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677658947397-311188\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:22:27+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:22:27+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677658917,"IsLogoff":false,"LoginTime":1677658917,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:22:27+08:00","userKey":"0_程颐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4OTQ3Mzk3LTMxMTE4OCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:22:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658963419-400519\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:22:43+08:00"}
{"addr":"[::1]:38354","data":"{\"seq\":\"1677658963419-400519\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:22:43+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:22:43+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677658933,"IsLogoff":false,"LoginTime":1677658933,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:22:43+08:00","userKey":"0_颜高"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4OTYzNDE5LTQwMDUxOSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:22:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:22:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.94 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:22:46+08:00"}
{"Addr":"[::1]:38354","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:22:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:38354 0xc0000e8840 0xc00051c300 1677658933 1677658963 1677658933 0xc0005accf0}","time":"2023-03-01T16:22:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:22:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:53824","time":"2023-03-01T16:22:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:53824","time":"2023-03-01T16:22:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658966750-558707\",\"cmd\":\"login\",\"data\":{\"userID\":\"蹇硕\",\"appID\":0}}","time":"2023-03-01T16:22:46+08:00"}
{"addr":"[::1]:53824","data":"{\"seq\":\"1677658966750-558707\",\"cmd\":\"login\",\"data\":{\"userID\":\"蹇硕\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:22:46+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4OTY2NzUwLTU1ODcwNyIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:22:46+08:00"}
{"Addr":"[::1]:53824","RoomID":0,"UserID":"蹇硕","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:22:46+08:00"}
{"AppId":0,"RoomID":101,"UserId":"蹇硕","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:22:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.22 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:22:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.35 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:22:46+08:00"}
{"Addr":"[::1]:53824","RoomID":101,"UserID":"蹇硕","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:22:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:22:46+08:00","valByte":"[\"172.30.33.105:9001\",\"1677658908\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"798537595","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:22:46+08:00","userID":"蹇硕"}
{"appID":0,"data":"{\"seq\":\"798537595\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"蹇硕\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:22:46+08:00","userID":"蹇硕"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:22:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:22:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.2 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:22:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658967393-841009\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:22:47+08:00"}
{"addr":"[::1]:38548","data":"{\"seq\":\"1677658967393-841009\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:22:47+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:22:47+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677658937,"IsLogoff":false,"LoginTime":1677658907,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:22:47+08:00","userKey":"0_狄黑"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4OTY3MzkzLTg0MTAwOSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:22:47+08:00"}
{"currentTime":1677658968,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:22:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:22:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658977332-341172\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:22:57+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677658977332-341172\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:22:57+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:22:57+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677658947,"IsLogoff":false,"LoginTime":1677658917,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:22:57+08:00","userKey":"0_程颐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4OTc3MzMyLTM0MTE3MiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:22:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658997388-645281\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:23:17+08:00"}
{"addr":"[::1]:53824","data":"{\"seq\":\"1677658997388-645281\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:23:17+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:23:17+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677658997388-225303\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:23:17+08:00"}
{"addr":"[::1]:38548","data":"{\"seq\":\"1677658997388-225303\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:23:17+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:23:17+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677658966,"IsLogoff":false,"LoginTime":1677658966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:23:17+08:00","userKey":"0_蹇硕"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677658967,"IsLogoff":false,"LoginTime":1677658907,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:23:17+08:00","userKey":"0_狄黑"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4OTk3Mzg4LTY0NTI4MSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:23:17+08:00"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU4OTk3Mzg4LTIyNTMwMyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:23:17+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:23:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659007341-613280\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:23:27+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677659007341-613280\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:23:27+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:23:27+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677658977,"IsLogoff":false,"LoginTime":1677658917,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:23:27+08:00","userKey":"0_程颐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MDA3MzQxLTYxMzI4MCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:23:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659027272-235613\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:23:47+08:00"}
{"addr":"[::1]:38548","data":"{\"seq\":\"1677659027272-235613\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:23:47+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:23:47+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677658997,"IsLogoff":false,"LoginTime":1677658907,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:23:47+08:00","userKey":"0_狄黑"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MDI3MjcyLTIzNTYxMyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:23:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659027396-855534\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:23:47+08:00"}
{"addr":"[::1]:53824","data":"{\"seq\":\"1677659027396-855534\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:23:47+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:23:47+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677658997,"IsLogoff":false,"LoginTime":1677658966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:23:47+08:00","userKey":"0_蹇硕"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MDI3Mzk2LTg1NTUzNCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:23:47+08:00"}
{"currentTime":1677659028,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:23:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:23:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659037390-930056\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:23:57+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677659037390-930056\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:23:57+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:23:57+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659007,"IsLogoff":false,"LoginTime":1677658917,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:23:57+08:00","userKey":"0_程颐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MDM3MzkwLTkzMDA1NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:23:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659057254-130363\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:24:17+08:00"}
{"addr":"[::1]:38548","data":"{\"seq\":\"1677659057254-130363\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:24:17+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:24:17+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659027,"IsLogoff":false,"LoginTime":1677658907,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:24:17+08:00","userKey":"0_狄黑"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MDU3MjU0LTEzMDM2MyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:24:17+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659057385-533814\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:24:17+08:00"}
{"addr":"[::1]:53824","data":"{\"seq\":\"1677659057385-533814\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:24:17+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:24:17+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659027,"IsLogoff":false,"LoginTime":1677658966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:24:17+08:00","userKey":"0_蹇硕"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MDU3Mzg1LTUzMzgxNCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:24:17+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:24:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659067397-304525\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:24:27+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677659067397-304525\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:24:27+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:24:27+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659037,"IsLogoff":false,"LoginTime":1677658917,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:24:27+08:00","userKey":"0_程颐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MDY3Mzk3LTMwNDUyNSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:24:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659087258-881758\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:24:47+08:00"}
{"addr":"[::1]:38548","data":"{\"seq\":\"1677659087258-881758\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:24:47+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:24:47+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659057,"IsLogoff":false,"LoginTime":1677658907,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:24:47+08:00","userKey":"0_狄黑"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MDg3MjU4LTg4MTc1OCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:24:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659087397-518466\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:24:47+08:00"}
{"addr":"[::1]:53824","data":"{\"seq\":\"1677659087397-518466\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:24:47+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:24:47+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659057,"IsLogoff":false,"LoginTime":1677658966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:24:47+08:00","userKey":"0_蹇硕"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MDg3Mzk3LTUxODQ2NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:24:47+08:00"}
{"currentTime":1677659088,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:24:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:24:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659097387-473491\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:24:57+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677659097387-473491\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:24:57+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:24:57+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659067,"IsLogoff":false,"LoginTime":1677658917,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:24:57+08:00","userKey":"0_程颐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MDk3Mzg3LTQ3MzQ5MSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:24:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659117262-775075\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:25:17+08:00"}
{"addr":"[::1]:38548","data":"{\"seq\":\"1677659117262-775075\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:25:17+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:25:17+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659087,"IsLogoff":false,"LoginTime":1677658907,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:25:17+08:00","userKey":"0_狄黑"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MTE3MjYyLTc3NTA3NSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:25:17+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659117387-291028\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:25:17+08:00"}
{"addr":"[::1]:53824","data":"{\"seq\":\"1677659117387-291028\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:25:17+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:25:17+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659087,"IsLogoff":false,"LoginTime":1677658966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:25:17+08:00","userKey":"0_蹇硕"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MTE3Mzg3LTI5MTAyOCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:25:17+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:25:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659127396-158439\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:25:27+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677659127396-158439\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:25:27+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:25:27+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659097,"IsLogoff":false,"LoginTime":1677658917,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:25:27+08:00","userKey":"0_程颐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MTI3Mzk2LTE1ODQzOSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:25:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659147260-997899\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:25:47+08:00"}
{"addr":"[::1]:38548","data":"{\"seq\":\"1677659147260-997899\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:25:47+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:25:47+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659117,"IsLogoff":false,"LoginTime":1677658907,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:25:47+08:00","userKey":"0_狄黑"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MTQ3MjYwLTk5Nzg5OSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:25:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659147391-304300\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:25:47+08:00"}
{"addr":"[::1]:53824","data":"{\"seq\":\"1677659147391-304300\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:25:47+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:25:47+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659117,"IsLogoff":false,"LoginTime":1677658966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:25:47+08:00","userKey":"0_蹇硕"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MTQ3MzkxLTMwNDMwMCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:25:47+08:00"}
{"currentTime":1677659148,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:25:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:25:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659157389-784812\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:25:57+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677659157389-784812\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:25:57+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:25:57+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659127,"IsLogoff":false,"LoginTime":1677658917,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:25:57+08:00","userKey":"0_程颐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MTU3Mzg5LTc4NDgxMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:25:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659177254-854818\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:26:17+08:00"}
{"addr":"[::1]:38548","data":"{\"seq\":\"1677659177254-854818\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:26:17+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:26:17+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659147,"IsLogoff":false,"LoginTime":1677658907,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:26:17+08:00","userKey":"0_狄黑"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MTc3MjU0LTg1NDgxOCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:26:17+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659177397-411236\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:26:17+08:00"}
{"addr":"[::1]:53824","data":"{\"seq\":\"1677659177397-411236\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:26:17+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:26:17+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659147,"IsLogoff":false,"LoginTime":1677658966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:26:17+08:00","userKey":"0_蹇硕"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MTc3Mzk3LTQxMTIzNiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:26:17+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:26:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659187398-400874\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:26:27+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677659187398-400874\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:26:27+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:26:27+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659157,"IsLogoff":false,"LoginTime":1677658917,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:26:27+08:00","userKey":"0_程颐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MTg3Mzk4LTQwMDg3NCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:26:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659207256-324235\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:26:47+08:00"}
{"addr":"[::1]:38548","data":"{\"seq\":\"1677659207256-324235\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:26:47+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:26:47+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659177,"IsLogoff":false,"LoginTime":1677658907,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:26:47+08:00","userKey":"0_狄黑"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MjA3MjU2LTMyNDIzNSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:26:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659207393-184327\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:26:47+08:00"}
{"addr":"[::1]:53824","data":"{\"seq\":\"1677659207393-184327\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:26:47+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:26:47+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659177,"IsLogoff":false,"LoginTime":1677658966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:26:47+08:00","userKey":"0_蹇硕"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MjA3MzkzLTE4NDMyNyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:26:47+08:00"}
{"currentTime":1677659208,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:26:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:26:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:26:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.01 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:26:50+08:00"}
{"Addr":"[::1]:38548","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:26:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:38548 0xc00015e000 0xc0004920c0 1677658907 1677659207 1677658907 0xc0005ac360}","time":"2023-03-01T16:26:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:26:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:58944","time":"2023-03-01T16:26:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:58944","time":"2023-03-01T16:26:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659210623-486543\",\"cmd\":\"login\",\"data\":{\"userID\":\"董允\",\"appID\":0}}","time":"2023-03-01T16:26:50+08:00"}
{"addr":"[::1]:58944","data":"{\"seq\":\"1677659210623-486543\",\"cmd\":\"login\",\"data\":{\"userID\":\"董允\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:26:50+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MjEwNjIzLTQ4NjU0MyIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:26:50+08:00"}
{"Addr":"[::1]:58944","RoomID":0,"UserID":"董允","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:26:50+08:00"}
{"AppId":0,"RoomID":101,"UserId":"董允","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:26:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.31 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:26:50+08:00"}
{"Addr":"[::1]:58944","RoomID":101,"UserID":"董允","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:26:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.4 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:26:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:26:50+08:00","valByte":"[\"172.30.33.105:9001\",\"1677659208\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"688699810","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:26:50+08:00","userID":"董允"}
{"appID":0,"data":"{\"seq\":\"688699810\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"董允\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:26:50+08:00","userID":"董允"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:26:51+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:26:51+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.24 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:26:51+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659217388-279586\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:26:57+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677659217388-279586\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:26:57+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:26:57+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659187,"IsLogoff":false,"LoginTime":1677658917,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:26:57+08:00","userKey":"0_程颐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MjE3Mzg4LTI3OTU4NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:26:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:60","func":"bychat/api/v1/user.SendMessageAll","level":"info","message":"ad","msg":"SendMessageAll","msgID":"1677659229065-342059","roomID":101,"time":"2023-03-01T16:27:09+08:00","userID":"程颐"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:27:09+08:00","valByte":"[\"172.30.33.105:9001\",\"1677659208\"]"}
{"appID":0,"cmd":"msg","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"ad","msg":"SendUserMessageAll","msgID":"1677659229065-342059","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:27:09+08:00","userID":"程颐"}
{"appID":0,"data":"{\"seq\":\"1677659229065-342059\",\"cmd\":\"msg\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"ad\",\"from\":\"程颐\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:27:09+08:00","userID":"程颐"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.84 method:POST statusCode:200 uri:/user/sendMessageAll]","time":"2023-03-01T16:27:09+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659237394-370054\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:27:17+08:00"}
{"addr":"[::1]:53824","data":"{\"seq\":\"1677659237394-370054\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:27:17+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:27:17+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659207,"IsLogoff":false,"LoginTime":1677658966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:27:17+08:00","userKey":"0_蹇硕"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MjM3Mzk0LTM3MDA1NCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:27:17+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:27:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659241386-577522\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:27:21+08:00"}
{"addr":"[::1]:58944","data":"{\"seq\":\"1677659241386-577522\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:27:21+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:27:21+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659210,"IsLogoff":false,"LoginTime":1677659210,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:27:21+08:00","userKey":"0_董允"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MjQxMzg2LTU3NzUyMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:27:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659247334-875604\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:27:27+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677659247334-875604\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:27:27+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:27:27+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659217,"IsLogoff":false,"LoginTime":1677658917,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:27:27+08:00","userKey":"0_程颐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MjQ3MzM0LTg3NTYwNCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:27:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659267383-513924\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:27:47+08:00"}
{"addr":"[::1]:53824","data":"{\"seq\":\"1677659267383-513924\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:27:47+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:27:47+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659237,"IsLogoff":false,"LoginTime":1677658966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:27:47+08:00","userKey":"0_蹇硕"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MjY3MzgzLTUxMzkyNCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:27:47+08:00"}
{"currentTime":1677659268,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:27:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:27:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659271398-876007\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:27:51+08:00"}
{"addr":"[::1]:58944","data":"{\"seq\":\"1677659271398-876007\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:27:51+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:27:51+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659241,"IsLogoff":false,"LoginTime":1677659210,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:27:51+08:00","userKey":"0_董允"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MjcxMzk4LTg3NjAwNyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:27:51+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659277333-675027\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:27:57+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677659277333-675027\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:27:57+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:27:57+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659247,"IsLogoff":false,"LoginTime":1677658917,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:27:57+08:00","userKey":"0_程颐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5Mjc3MzMzLTY3NTAyNyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:27:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:28:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659301394-998912\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:28:21+08:00"}
{"addr":"[::1]:58944","data":"{\"seq\":\"1677659301394-998912\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:28:21+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:28:21+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659271,"IsLogoff":false,"LoginTime":1677659210,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:28:21+08:00","userKey":"0_董允"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MzAxMzk0LTk5ODkxMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:28:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659307341-835018\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:28:27+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677659307341-835018\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:28:27+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:28:27+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659277,"IsLogoff":false,"LoginTime":1677658917,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:28:27+08:00","userKey":"0_程颐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MzA3MzQxLTgzNTAxOCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:28:27+08:00"}
{"currentTime":1677659328,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:28:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:28:49+08:00"}
{"client.Addr":"[::1]:38354","client.HeartbeatTime":1677658963,"client.LoginTime":1677658933,"client.UserID":"颜高","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:28:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659331394-400725\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:28:51+08:00"}
{"addr":"[::1]:58944","data":"{\"seq\":\"1677659331394-400725\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:28:51+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:28:51+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659301,"IsLogoff":false,"LoginTime":1677659210,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:28:51+08:00","userKey":"0_董允"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MzMxMzk0LTQwMDcyNSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:28:51+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659337332-458028\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:28:57+08:00"}
{"addr":"[::1]:59394","data":"{\"seq\":\"1677659337332-458028\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:28:57+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:28:57+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659307,"IsLogoff":false,"LoginTime":1677658917,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:28:57+08:00","userKey":"0_程颐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MzM3MzMyLTQ1ODAyOCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:28:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659338383-881942\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:28:58+08:00"}
{"addr":"[::1]:53824","data":"{\"seq\":\"1677659338383-881942\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:28:58+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:28:58+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659267,"IsLogoff":false,"LoginTime":1677658966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:28:58+08:00","userKey":"0_蹇硕"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5MzM4MzgzLTg4MTk0MiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:28:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:29:19+08:00"}
{"client.Addr":"[::1]:38354","client.HeartbeatTime":1677658963,"client.LoginTime":1677658933,"client.UserID":"颜高","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:29:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:35:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:35:16+08:00"}
{"currentTime":1677659718,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:35:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:35:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.4 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:35:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:35:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:35:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:50428","time":"2023-03-01T16:35:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:50428","time":"2023-03-01T16:35:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659719284-919003\",\"cmd\":\"login\",\"data\":{\"userID\":\"司马恂\",\"appID\":0}}","time":"2023-03-01T16:35:19+08:00"}
{"addr":"[::1]:50428","data":"{\"seq\":\"1677659719284-919003\",\"cmd\":\"login\",\"data\":{\"userID\":\"司马恂\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:35:19+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5NzE5Mjg0LTkxOTAwMyIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:35:19+08:00"}
{"Addr":"[::1]:50428","RoomID":0,"UserID":"司马恂","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:35:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.39 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:35:19+08:00"}
{"AppId":0,"RoomID":101,"UserId":"司马恂","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:35:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.17 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:35:19+08:00"}
{"Addr":"[::1]:50428","RoomID":101,"UserID":"司马恂","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:35:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:35:19+08:00","valByte":"[\"172.30.33.105:9001\",\"1677659718\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"337935909","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:35:19+08:00","userID":"司马恂"}
{"appID":0,"data":"{\"seq\":\"337935909\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"司马恂\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:35:19+08:00","userID":"司马恂"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:35:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:35:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.18 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:35:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:35:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.92 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:35:48+08:00"}
{"Addr":"[::1]:50428","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:35:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:50428 0xc000724580 0xc0005ac960 1677659719 1677659719 1677659719 0xc00091c480}","time":"2023-03-01T16:35:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:35:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:34936","time":"2023-03-01T16:35:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:34936","time":"2023-03-01T16:35:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659748996-136574\",\"cmd\":\"login\",\"data\":{\"userID\":\"施之常\",\"appID\":0}}","time":"2023-03-01T16:35:48+08:00"}
{"addr":"[::1]:34936","data":"{\"seq\":\"1677659748996-136574\",\"cmd\":\"login\",\"data\":{\"userID\":\"施之常\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:35:48+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5NzQ4OTk2LTEzNjU3NCIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:35:48+08:00"}
{"Addr":"[::1]:34936","RoomID":0,"UserID":"施之常","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:35:48+08:00"}
{"AppId":0,"RoomID":101,"UserId":"施之常","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:35:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.75 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:35:49+08:00"}
{"Addr":"[::1]:34936","RoomID":101,"UserID":"施之常","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:35:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:2.07 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:35:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:35:49+08:00","valByte":"[\"172.30.33.105:9001\",\"1677659718\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"52674672","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:35:49+08:00","userID":"施之常"}
{"appID":0,"data":"{\"seq\":\"52674672\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"施之常\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:35:49+08:00","userID":"施之常"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:35:49+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:35:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:35:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.22 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:35:49+08:00"}
{"currentTime":1677659778,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:36:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659779005-149297\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:36:19+08:00"}
{"addr":"[::1]:34936","data":"{\"seq\":\"1677659779005-149297\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:36:19+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:36:19+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659748,"IsLogoff":false,"LoginTime":1677659748,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:36:19+08:00","userKey":"0_施之常"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5Nzc5MDA1LTE0OTI5NyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:36:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:36:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:36:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.78 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:36:46+08:00"}
{"Addr":"[::1]:34936","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:36:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:34936 0xc000724f20 0xc0005ad8c0 1677659748 1677659779 1677659748 0xc0002287e0}","time":"2023-03-01T16:36:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:36:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:53866","time":"2023-03-01T16:36:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:53866","time":"2023-03-01T16:36:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659806279-444796\",\"cmd\":\"login\",\"data\":{\"userID\":\"左人郢\",\"appID\":0}}","time":"2023-03-01T16:36:46+08:00"}
{"addr":"[::1]:53866","data":"{\"seq\":\"1677659806279-444796\",\"cmd\":\"login\",\"data\":{\"userID\":\"左人郢\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:36:46+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5ODA2Mjc5LTQ0NDc5NiIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:36:46+08:00"}
{"Addr":"[::1]:53866","RoomID":0,"UserID":"左人郢","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:36:46+08:00"}
{"AppId":0,"RoomID":101,"UserId":"左人郢","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:36:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.38 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:36:46+08:00"}
{"Addr":"[::1]:53866","RoomID":101,"UserID":"左人郢","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:36:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:36:46+08:00","valByte":"[\"172.30.33.105:9001\",\"1677659778\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"344991311","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:36:46+08:00","userID":"左人郢"}
{"appID":0,"data":"{\"seq\":\"344991311\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"左人郢\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:36:46+08:00","userID":"左人郢"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.6 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:36:46+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:36:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:36:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.17 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:36:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:36:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:60","func":"bychat/api/v1/user.SendMessageAll","level":"info","message":"asd","msg":"SendMessageAll","msgID":"1677659812892-735792","roomID":101,"time":"2023-03-01T16:36:52+08:00","userID":"左人郢"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:36:52+08:00","valByte":"[\"172.30.33.105:9001\",\"1677659778\"]"}
{"appID":0,"cmd":"msg","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"asd","msg":"SendUserMessageAll","msgID":"1677659812892-735792","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:36:52+08:00","userID":"左人郢"}
{"appID":0,"data":"{\"seq\":\"1677659812892-735792\",\"cmd\":\"msg\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"asd\",\"from\":\"左人郢\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:36:52+08:00","userID":"左人郢"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:2.11 method:POST statusCode:200 uri:/user/sendMessageAll]","time":"2023-03-01T16:36:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659836280-723505\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:37:16+08:00"}
{"addr":"[::1]:53866","data":"{\"seq\":\"1677659836280-723505\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:37:16+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:37:16+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659806,"IsLogoff":false,"LoginTime":1677659806,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:37:16+08:00","userKey":"0_左人郢"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5ODM2MjgwLTcyMzUwNSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:37:16+08:00"}
{"currentTime":1677659838,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:37:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:37:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:37:33+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.66 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:37:33+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:37:33+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:39444","time":"2023-03-01T16:37:33+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:39444","time":"2023-03-01T16:37:33+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659853942-949222\",\"cmd\":\"login\",\"data\":{\"userID\":\"兰陵王\",\"appID\":0}}","time":"2023-03-01T16:37:33+08:00"}
{"addr":"[::1]:39444","data":"{\"seq\":\"1677659853942-949222\",\"cmd\":\"login\",\"data\":{\"userID\":\"兰陵王\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:37:33+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5ODUzOTQyLTk0OTIyMiIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:37:33+08:00"}
{"Addr":"[::1]:39444","RoomID":0,"UserID":"兰陵王","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:37:33+08:00"}
{"AppId":0,"RoomID":101,"UserId":"兰陵王","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:37:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.27 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:37:34+08:00"}
{"Addr":"[::1]:39444","RoomID":101,"UserID":"兰陵王","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:37:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:37:34+08:00","valByte":"[\"172.30.33.105:9001\",\"1677659838\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"68210718","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:37:34+08:00","userID":"兰陵王"}
{"appID":0,"data":"{\"seq\":\"68210718\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"兰陵王\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:37:34+08:00","userID":"兰陵王"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.84 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:37:34+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:37:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:37:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.43 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:37:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:60","func":"bychat/api/v1/user.SendMessageAll","level":"info","message":"asd","msg":"SendMessageAll","msgID":"1677659856425-649836","roomID":101,"time":"2023-03-01T16:37:36+08:00","userID":"兰陵王"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:37:36+08:00","valByte":"[\"172.30.33.105:9001\",\"1677659838\"]"}
{"appID":0,"cmd":"msg","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"asd","msg":"SendUserMessageAll","msgID":"1677659856425-649836","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:37:36+08:00","userID":"兰陵王"}
{"appID":0,"data":"{\"seq\":\"1677659856425-649836\",\"cmd\":\"msg\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"asd\",\"from\":\"兰陵王\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:37:36+08:00","userID":"兰陵王"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.28 method:POST statusCode:200 uri:/user/sendMessageAll]","time":"2023-03-01T16:37:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659866280-333735\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:37:46+08:00"}
{"addr":"[::1]:53866","data":"{\"seq\":\"1677659866280-333735\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:37:46+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:37:46+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659836,"IsLogoff":false,"LoginTime":1677659806,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:37:46+08:00","userKey":"0_左人郢"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5ODY2MjgwLTMzMzczNSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:37:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:37:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659884396-385123\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:38:04+08:00"}
{"addr":"[::1]:39444","data":"{\"seq\":\"1677659884396-385123\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:38:04+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:38:04+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659853,"IsLogoff":false,"LoginTime":1677659853,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:38:04+08:00","userKey":"0_兰陵王"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5ODg0Mzk2LTM4NTEyMyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:38:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659896281-566571\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:38:16+08:00"}
{"addr":"[::1]:53866","data":"{\"seq\":\"1677659896281-566571\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:38:16+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:38:16+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659866,"IsLogoff":false,"LoginTime":1677659806,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:38:16+08:00","userKey":"0_左人郢"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5ODk2MjgxLTU2NjU3MSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:38:16+08:00"}
{"currentTime":1677659898,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:38:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:38:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659914392-803317\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:38:34+08:00"}
{"addr":"[::1]:39444","data":"{\"seq\":\"1677659914392-803317\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:38:34+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:38:34+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659884,"IsLogoff":false,"LoginTime":1677659853,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:38:34+08:00","userKey":"0_兰陵王"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5OTE0MzkyLTgwMzMxNyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:38:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:38:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:2.31 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:38:40+08:00"}
{"Addr":"[::1]:53866","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:38:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:53866 0xc000724840 0xc0005acd80 1677659806 1677659896 1677659806 0xc000542360}","time":"2023-03-01T16:38:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:38:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:40412","time":"2023-03-01T16:38:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:40412","time":"2023-03-01T16:38:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659920787-335117\",\"cmd\":\"login\",\"data\":{\"userID\":\"司马相如\",\"appID\":0}}","time":"2023-03-01T16:38:40+08:00"}
{"addr":"[::1]:40412","data":"{\"seq\":\"1677659920787-335117\",\"cmd\":\"login\",\"data\":{\"userID\":\"司马相如\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:38:40+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5OTIwNzg3LTMzNTExNyIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:38:40+08:00"}
{"Addr":"[::1]:40412","RoomID":0,"UserID":"司马相如","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:38:40+08:00"}
{"AppId":0,"RoomID":101,"UserId":"司马相如","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:38:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.4 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:38:40+08:00"}
{"Addr":"[::1]:40412","RoomID":101,"UserID":"司马相如","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:38:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:38:40+08:00","valByte":"[\"172.30.33.105:9001\",\"1677659898\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"820435319","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:38:40+08:00","userID":"司马相如"}
{"appID":0,"data":"{\"seq\":\"820435319\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"司马相如\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:38:40+08:00","userID":"司马相如"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.22 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:38:40+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:38:41+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:38:41+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.17 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:38:41+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:38:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.92 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:38:46+08:00"}
{"Addr":"[::1]:40412","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:38:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:40412 0xc0008162c0 0xc0005ac360 1677659920 1677659920 1677659920 0xc00068e870}","time":"2023-03-01T16:38:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:38:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:59224","time":"2023-03-01T16:38:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:59224","time":"2023-03-01T16:38:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659926775-765784\",\"cmd\":\"login\",\"data\":{\"userID\":\"张纮\",\"appID\":0}}","time":"2023-03-01T16:38:46+08:00"}
{"addr":"[::1]:59224","data":"{\"seq\":\"1677659926775-765784\",\"cmd\":\"login\",\"data\":{\"userID\":\"张纮\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:38:46+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5OTI2Nzc1LTc2NTc4NCIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:38:46+08:00"}
{"Addr":"[::1]:59224","RoomID":0,"UserID":"张纮","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:38:46+08:00"}
{"AppId":0,"RoomID":101,"UserId":"张纮","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:38:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.54 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:38:46+08:00"}
{"Addr":"[::1]:59224","RoomID":101,"UserID":"张纮","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:38:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:38:46+08:00","valByte":"[\"172.30.33.105:9001\",\"1677659898\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"829078835","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:38:46+08:00","userID":"张纮"}
{"appID":0,"data":"{\"seq\":\"829078835\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"张纮\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:38:46+08:00","userID":"张纮"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.34 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:38:46+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:38:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:38:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.15 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:38:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:38:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659944389-400292\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:39:04+08:00"}
{"addr":"[::1]:39444","data":"{\"seq\":\"1677659944389-400292\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:39:04+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:39:04+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659914,"IsLogoff":false,"LoginTime":1677659853,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:39:04+08:00","userKey":"0_兰陵王"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5OTQ0Mzg5LTQwMDI5MiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:39:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659956784-624530\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:39:16+08:00"}
{"addr":"[::1]:59224","data":"{\"seq\":\"1677659956784-624530\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:39:16+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:39:16+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659926,"IsLogoff":false,"LoginTime":1677659926,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:39:16+08:00","userKey":"0_张纮"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5OTU2Nzg0LTYyNDUzMCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:39:16+08:00"}
{"currentTime":1677659958,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:39:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:39:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659974397-470632\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:39:34+08:00"}
{"addr":"[::1]:39444","data":"{\"seq\":\"1677659974397-470632\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:39:34+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:39:34+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659944,"IsLogoff":false,"LoginTime":1677659853,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:39:34+08:00","userKey":"0_兰陵王"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5OTc0Mzk3LTQ3MDYzMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:39:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:39:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:2.7 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:39:35+08:00"}
{"Addr":"[::1]:59224","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:39:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:59224 0xc0005569a0 0xc000182a20 1677659926 1677659956 1677659926 0xc000228360}","time":"2023-03-01T16:39:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:39:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:39:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.77 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:39:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:39:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:35966","time":"2023-03-01T16:39:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:35966","time":"2023-03-01T16:39:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677659998726-125712\",\"cmd\":\"login\",\"data\":{\"userID\":\"杨素\",\"appID\":0}}","time":"2023-03-01T16:39:58+08:00"}
{"addr":"[::1]:35966","data":"{\"seq\":\"1677659998726-125712\",\"cmd\":\"login\",\"data\":{\"userID\":\"杨素\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:39:58+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjU5OTk4NzI2LTEyNTcxMiIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:39:58+08:00"}
{"Addr":"[::1]:35966","RoomID":0,"UserID":"杨素","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:39:58+08:00"}
{"AppId":0,"RoomID":101,"UserId":"杨素","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:39:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.3 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:39:58+08:00"}
{"Addr":"[::1]:35966","RoomID":101,"UserID":"杨素","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:39:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:39:58+08:00","valByte":"[\"172.30.33.105:9001\",\"1677659958\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"772888548","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:39:58+08:00","userID":"杨素"}
{"appID":0,"data":"{\"seq\":\"772888548\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"杨素\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:39:58+08:00","userID":"杨素"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.47 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:39:58+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:39:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:39:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.34 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:39:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660004395-233765\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:40:04+08:00"}
{"addr":"[::1]:39444","data":"{\"seq\":\"1677660004395-233765\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:40:04+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:40:04+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677659974,"IsLogoff":false,"LoginTime":1677659853,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:40:04+08:00","userKey":"0_兰陵王"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMDA0Mzk1LTIzMzc2NSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:40:04+08:00"}
{"currentTime":1677660018,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:40:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:40:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:40:23+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.84 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:40:23+08:00"}
{"Addr":"[::1]:35966","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:40:23+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:35966 0xc000556000 0xc00009a060 1677659998 1677659998 1677659998 0xc000542120}","time":"2023-03-01T16:40:23+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:40:23+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:47764","time":"2023-03-01T16:40:23+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:47764","time":"2023-03-01T16:40:23+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660023625-428382\",\"cmd\":\"login\",\"data\":{\"userID\":\"贾谊\",\"appID\":0}}","time":"2023-03-01T16:40:23+08:00"}
{"addr":"[::1]:47764","data":"{\"seq\":\"1677660023625-428382\",\"cmd\":\"login\",\"data\":{\"userID\":\"贾谊\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:40:23+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMDIzNjI1LTQyODM4MiIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:40:23+08:00"}
{"Addr":"[::1]:47764","RoomID":0,"UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:40:23+08:00"}
{"AppId":0,"RoomID":101,"UserId":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:40:23+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.18 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:40:23+08:00"}
{"Addr":"[::1]:47764","RoomID":101,"UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:40:23+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:40:23+08:00","valByte":"[\"172.30.33.105:9001\",\"1677660018\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"718880263","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:40:23+08:00","userID":"贾谊"}
{"appID":0,"data":"{\"seq\":\"718880263\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"贾谊\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:40:23+08:00","userID":"贾谊"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.21 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:40:23+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:40:24+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:40:24+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.15 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:40:24+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660034394-822713\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:40:34+08:00"}
{"addr":"[::1]:39444","data":"{\"seq\":\"1677660034394-822713\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:40:34+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:40:34+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660004,"IsLogoff":false,"LoginTime":1677659853,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:40:34+08:00","userKey":"0_兰陵王"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMDM0Mzk0LTgyMjcxMyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:40:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:40:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.88 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:40:48+08:00"}
{"Addr":"[::1]:47764","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:40:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:47764 0xc000556160 0xc000500300 1677660023 1677660023 1677660023 0xc0005423f0}","time":"2023-03-01T16:40:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:40:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:47238","time":"2023-03-01T16:40:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:47238","time":"2023-03-01T16:40:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660048383-110735\",\"cmd\":\"login\",\"data\":{\"userID\":\"博尔忽\",\"appID\":0}}","time":"2023-03-01T16:40:48+08:00"}
{"addr":"[::1]:47238","data":"{\"seq\":\"1677660048383-110735\",\"cmd\":\"login\",\"data\":{\"userID\":\"博尔忽\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:40:48+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMDQ4MzgzLTExMDczNSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:40:48+08:00"}
{"Addr":"[::1]:47238","RoomID":0,"UserID":"博尔忽","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:40:48+08:00"}
{"AppId":0,"RoomID":101,"UserId":"博尔忽","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:40:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.18 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:40:48+08:00"}
{"Addr":"[::1]:47238","RoomID":101,"UserID":"博尔忽","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:40:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:40:48+08:00","valByte":"[\"172.30.33.105:9001\",\"1677660018\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"434584289","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:40:48+08:00","userID":"博尔忽"}
{"appID":0,"data":"{\"seq\":\"434584289\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"博尔忽\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:40:48+08:00","userID":"博尔忽"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.27 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:40:48+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:40:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:40:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.3 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:40:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:40:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:40:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.42 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:40:59+08:00"}
{"Addr":"[::1]:47238","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:40:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:47238 0xc000556840 0xc0005004e0 1677660048 1677660048 1677660048 0xc00091c2d0}","time":"2023-03-01T16:40:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:40:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:32796","time":"2023-03-01T16:40:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:32796","time":"2023-03-01T16:40:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660059221-567552\",\"cmd\":\"login\",\"data\":{\"userID\":\"黄帝\",\"appID\":0}}","time":"2023-03-01T16:40:59+08:00"}
{"addr":"[::1]:32796","data":"{\"seq\":\"1677660059221-567552\",\"cmd\":\"login\",\"data\":{\"userID\":\"黄帝\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:40:59+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMDU5MjIxLTU2NzU1MiIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:40:59+08:00"}
{"Addr":"[::1]:32796","RoomID":0,"UserID":"黄帝","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:40:59+08:00"}
{"AppId":0,"RoomID":101,"UserId":"黄帝","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:40:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.19 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:40:59+08:00"}
{"Addr":"[::1]:32796","RoomID":101,"UserID":"黄帝","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:40:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:40:59+08:00","valByte":"[\"172.30.33.105:9001\",\"1677660018\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"257244113","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:40:59+08:00","userID":"黄帝"}
{"appID":0,"data":"{\"seq\":\"257244113\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"黄帝\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:40:59+08:00","userID":"黄帝"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.2 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:40:59+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:40:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:40:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.19 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:40:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660064389-748308\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:41:04+08:00"}
{"addr":"[::1]:39444","data":"{\"seq\":\"1677660064389-748308\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:41:04+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:41:04+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660034,"IsLogoff":false,"LoginTime":1677659853,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:41:04+08:00","userKey":"0_兰陵王"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMDY0Mzg5LTc0ODMwOCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:41:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:41:08+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.42 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:41:08+08:00"}
{"Addr":"[::1]:32796","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:41:08+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:32796 0xc000817b80 0xc000182e40 1677660059 1677660059 1677660059 0xc000542900}","time":"2023-03-01T16:41:08+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:41:08+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:40514","time":"2023-03-01T16:41:08+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:40514","time":"2023-03-01T16:41:08+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660068221-312082\",\"cmd\":\"login\",\"data\":{\"userID\":\"黄宗曦\",\"appID\":0}}","time":"2023-03-01T16:41:08+08:00"}
{"addr":"[::1]:40514","data":"{\"seq\":\"1677660068221-312082\",\"cmd\":\"login\",\"data\":{\"userID\":\"黄宗曦\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:41:08+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMDY4MjIxLTMxMjA4MiIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:41:08+08:00"}
{"Addr":"[::1]:40514","RoomID":0,"UserID":"黄宗曦","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:41:08+08:00"}
{"AppId":0,"RoomID":101,"UserId":"黄宗曦","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:41:08+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.19 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:41:08+08:00"}
{"Addr":"[::1]:40514","RoomID":101,"UserID":"黄宗曦","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:41:08+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:41:08+08:00","valByte":"[\"172.30.33.105:9001\",\"1677660018\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"304616294","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:41:08+08:00","userID":"黄宗曦"}
{"appID":0,"data":"{\"seq\":\"304616294\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"黄宗曦\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:41:08+08:00","userID":"黄宗曦"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.81 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:41:08+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:41:08+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:41:08+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.21 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:41:08+08:00"}
{"currentTime":1677660078,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:41:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:41:19+08:00"}
{"client.Addr":"[::1]:50428","client.HeartbeatTime":1677659719,"client.LoginTime":1677659719,"client.UserID":"司马恂","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:41:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660094386-786793\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:41:34+08:00"}
{"addr":"[::1]:39444","data":"{\"seq\":\"1677660094386-786793\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:41:34+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:41:34+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660064,"IsLogoff":false,"LoginTime":1677659853,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:41:34+08:00","userKey":"0_兰陵王"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMDk0Mzg2LTc4Njc5MyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:41:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660098233-890320\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:41:38+08:00"}
{"addr":"[::1]:40514","data":"{\"seq\":\"1677660098233-890320\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:41:38+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:41:38+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660068,"IsLogoff":false,"LoginTime":1677660068,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:41:38+08:00","userKey":"0_黄宗曦"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMDk4MjMzLTg5MDMyMCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:41:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:41:49+08:00"}
{"client.Addr":"[::1]:50428","client.HeartbeatTime":1677659719,"client.LoginTime":1677659719,"client.UserID":"司马恂","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:41:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:41:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.4 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:41:55+08:00"}
{"Addr":"[::1]:40514","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:41:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:40514 0xc0005562c0 0xc00009a300 1677660068 1677660098 1677660068 0xc0005421b0}","time":"2023-03-01T16:41:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:41:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:37190","time":"2023-03-01T16:41:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:37190","time":"2023-03-01T16:41:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660115671-681239\",\"cmd\":\"login\",\"data\":{\"userID\":\"貂蝉\",\"appID\":0}}","time":"2023-03-01T16:41:55+08:00"}
{"addr":"[::1]:37190","data":"{\"seq\":\"1677660115671-681239\",\"cmd\":\"login\",\"data\":{\"userID\":\"貂蝉\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:41:55+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMTE1NjcxLTY4MTIzOSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:41:55+08:00"}
{"Addr":"[::1]:37190","RoomID":0,"UserID":"貂蝉","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:41:55+08:00"}
{"AppId":0,"RoomID":101,"UserId":"貂蝉","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:41:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.64 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:41:55+08:00"}
{"Addr":"[::1]:37190","RoomID":101,"UserID":"貂蝉","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:41:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:41:55+08:00","valByte":"[\"172.30.33.105:9001\",\"1677660078\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"717596894","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:41:55+08:00","userID":"貂蝉"}
{"appID":0,"data":"{\"seq\":\"717596894\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"貂蝉\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:41:55+08:00","userID":"貂蝉"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.34 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:41:55+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:41:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:41:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.27 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:41:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:42:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.15 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:42:01+08:00"}
{"Addr":"[::1]:37190","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:42:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:37190 0xc00039fa20 0xc000128ba0 1677660115 1677660115 1677660115 0xc000542990}","time":"2023-03-01T16:42:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:42:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:37204","time":"2023-03-01T16:42:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:37204","time":"2023-03-01T16:42:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660122091-455861\",\"cmd\":\"login\",\"data\":{\"userID\":\"马致远\",\"appID\":0}}","time":"2023-03-01T16:42:02+08:00"}
{"addr":"[::1]:37204","data":"{\"seq\":\"1677660122091-455861\",\"cmd\":\"login\",\"data\":{\"userID\":\"马致远\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:42:02+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMTIyMDkxLTQ1NTg2MSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:42:02+08:00"}
{"Addr":"[::1]:37204","RoomID":0,"UserID":"马致远","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:42:02+08:00"}
{"AppId":0,"RoomID":101,"UserId":"马致远","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:42:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.19 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:42:02+08:00"}
{"Addr":"[::1]:37204","RoomID":101,"UserID":"马致远","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:42:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:42:02+08:00","valByte":"[\"172.30.33.105:9001\",\"1677660078\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"127244046","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:42:02+08:00","userID":"马致远"}
{"appID":0,"data":"{\"seq\":\"127244046\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"马致远\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:42:02+08:00","userID":"马致远"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.2 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:42:02+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:42:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:42:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.27 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:42:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660124408-329196\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:42:04+08:00"}
{"addr":"[::1]:39444","data":"{\"seq\":\"1677660124408-329196\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:42:04+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:42:04+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660094,"IsLogoff":false,"LoginTime":1677659853,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:42:04+08:00","userKey":"0_兰陵王"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMTI0NDA4LTMyOTE5NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:42:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:42:09+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:4.1 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:42:09+08:00"}
{"Addr":"[::1]:37204","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:42:09+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:37204 0xc000816000 0xc000128fc0 1677660122 1677660122 1677660122 0xc0002283f0}","time":"2023-03-01T16:42:09+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:42:09+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:52648","time":"2023-03-01T16:42:09+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:52648","time":"2023-03-01T16:42:09+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660129674-721697\",\"cmd\":\"login\",\"data\":{\"userID\":\"文丑\",\"appID\":0}}","time":"2023-03-01T16:42:09+08:00"}
{"addr":"[::1]:52648","data":"{\"seq\":\"1677660129674-721697\",\"cmd\":\"login\",\"data\":{\"userID\":\"文丑\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:42:09+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMTI5Njc0LTcyMTY5NyIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:42:09+08:00"}
{"Addr":"[::1]:52648","RoomID":0,"UserID":"文丑","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:42:09+08:00"}
{"AppId":0,"RoomID":101,"UserId":"文丑","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:42:09+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.4 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:42:09+08:00"}
{"Addr":"[::1]:52648","RoomID":101,"UserID":"文丑","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:42:09+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:42:09+08:00","valByte":"[\"172.30.33.105:9001\",\"1677660078\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"709416768","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:42:09+08:00","userID":"文丑"}
{"appID":0,"data":"{\"seq\":\"709416768\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"文丑\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:42:09+08:00","userID":"文丑"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.55 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:42:09+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:42:10+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:42:10+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.17 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:42:10+08:00"}
{"currentTime":1677660138,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:42:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:42:19+08:00"}
{"client.Addr":"[::1]:50428","client.HeartbeatTime":1677659719,"client.LoginTime":1677659719,"client.UserID":"司马恂","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:42:19+08:00"}
{"client.Addr":"[::1]:34936","client.HeartbeatTime":1677659779,"client.LoginTime":1677659748,"client.UserID":"施之常","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:42:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660154386-824752\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:42:34+08:00"}
{"addr":"[::1]:39444","data":"{\"seq\":\"1677660154386-824752\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:42:34+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:42:34+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660124,"IsLogoff":false,"LoginTime":1677659853,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:42:34+08:00","userKey":"0_兰陵王"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMTU0Mzg2LTgyNDc1MiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:42:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660159681-497968\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:42:39+08:00"}
{"addr":"[::1]:52648","data":"{\"seq\":\"1677660159681-497968\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:42:39+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:42:39+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660129,"IsLogoff":false,"LoginTime":1677660129,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:42:39+08:00","userKey":"0_文丑"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMTU5NjgxLTQ5Nzk2OCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:42:39+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:42:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.74 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:42:44+08:00"}
{"Addr":"[::1]:52648","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:42:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:52648 0xc000816160 0xc00009a420 1677660129 1677660159 1677660129 0xc0002285a0}","time":"2023-03-01T16:42:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:42:49+08:00"}
{"client.Addr":"[::1]:34936","client.HeartbeatTime":1677659779,"client.LoginTime":1677659748,"client.UserID":"施之常","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:42:49+08:00"}
{"client.Addr":"[::1]:50428","client.HeartbeatTime":1677659719,"client.LoginTime":1677659719,"client.UserID":"司马恂","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:42:49+08:00"}
{"currentTime":1677660198,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:43:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:43:19+08:00"}
{"client.Addr":"[::1]:50428","client.HeartbeatTime":1677659719,"client.LoginTime":1677659719,"client.UserID":"司马恂","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:43:19+08:00"}
{"client.Addr":"[::1]:34936","client.HeartbeatTime":1677659779,"client.LoginTime":1677659748,"client.UserID":"施之常","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:43:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:43:49+08:00"}
{"client.Addr":"[::1]:50428","client.HeartbeatTime":1677659719,"client.LoginTime":1677659719,"client.UserID":"司马恂","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:43:49+08:00"}
{"client.Addr":"[::1]:34936","client.HeartbeatTime":1677659779,"client.LoginTime":1677659748,"client.UserID":"施之常","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:43:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660241391-126593\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:44:01+08:00"}
{"addr":"[::1]:39444","data":"{\"seq\":\"1677660241391-126593\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:44:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:44:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660154,"IsLogoff":false,"LoginTime":1677659853,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:44:01+08:00","userKey":"0_兰陵王"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMjQxMzkxLTEyNjU5MyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:44:01+08:00"}
{"currentTime":1677660258,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:44:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:44:19+08:00"}
{"client.Addr":"[::1]:50428","client.HeartbeatTime":1677659719,"client.LoginTime":1677659719,"client.UserID":"司马恂","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:44:19+08:00"}
{"client.Addr":"[::1]:34936","client.HeartbeatTime":1677659779,"client.LoginTime":1677659748,"client.UserID":"施之常","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:44:19+08:00"}
{"client.Addr":"[::1]:53866","client.HeartbeatTime":1677659896,"client.LoginTime":1677659806,"client.UserID":"左人郢","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:44:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:44:49+08:00"}
{"client.Addr":"[::1]:53866","client.HeartbeatTime":1677659896,"client.LoginTime":1677659806,"client.UserID":"左人郢","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:44:49+08:00"}
{"client.Addr":"[::1]:50428","client.HeartbeatTime":1677659719,"client.LoginTime":1677659719,"client.UserID":"司马恂","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:44:49+08:00"}
{"client.Addr":"[::1]:40412","client.HeartbeatTime":1677659920,"client.LoginTime":1677659920,"client.UserID":"司马相如","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:44:49+08:00"}
{"client.Addr":"[::1]:34936","client.HeartbeatTime":1677659779,"client.LoginTime":1677659748,"client.UserID":"施之常","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:44:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:44:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.89 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:44:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:44:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:32968","time":"2023-03-01T16:44:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:32968","time":"2023-03-01T16:44:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660294694-392519\",\"cmd\":\"login\",\"data\":{\"userID\":\"宓不齐\",\"appID\":0}}","time":"2023-03-01T16:44:54+08:00"}
{"addr":"[::1]:32968","data":"{\"seq\":\"1677660294694-392519\",\"cmd\":\"login\",\"data\":{\"userID\":\"宓不齐\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:44:54+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMjk0Njk0LTM5MjUxOSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:44:54+08:00"}
{"Addr":"[::1]:32968","RoomID":0,"UserID":"宓不齐","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:44:54+08:00"}
{"AppId":0,"RoomID":101,"UserId":"宓不齐","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:44:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.19 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:44:54+08:00"}
{"Addr":"[::1]:32968","RoomID":101,"UserID":"宓不齐","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:44:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:44:54+08:00","valByte":"[\"172.30.33.105:9001\",\"1677660258\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"741180054","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:44:54+08:00","userID":"宓不齐"}
{"appID":0,"data":"{\"seq\":\"741180054\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"宓不齐\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:44:54+08:00","userID":"宓不齐"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.7 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:44:54+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:44:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:44:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.32 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:44:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660301399-368330\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:45:01+08:00"}
{"addr":"[::1]:39444","data":"{\"seq\":\"1677660301399-368330\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:45:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:45:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660241,"IsLogoff":false,"LoginTime":1677659853,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:45:01+08:00","userKey":"0_兰陵王"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMzAxMzk5LTM2ODMzMCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:45:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/systems/system.go:17","func":"bychat/api/v1/systems.Status","level":"info","msg":"http_request 查询系统状态","time":"2023-03-01T16:45:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.22 method:GET statusCode:200 uri:/system/state]","time":"2023-03-01T16:45:04+08:00"}
{"currentTime":1677660318,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:45:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:45:19+08:00"}
{"client.Addr":"[::1]:50428","client.HeartbeatTime":1677659719,"client.LoginTime":1677659719,"client.UserID":"司马恂","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:45:19+08:00"}
{"client.Addr":"[::1]:53866","client.HeartbeatTime":1677659896,"client.LoginTime":1677659806,"client.UserID":"左人郢","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:45:19+08:00"}
{"client.Addr":"[::1]:59224","client.HeartbeatTime":1677659956,"client.LoginTime":1677659926,"client.UserID":"张纮","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:45:19+08:00"}
{"client.Addr":"[::1]:40412","client.HeartbeatTime":1677659920,"client.LoginTime":1677659920,"client.UserID":"司马相如","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:45:19+08:00"}
{"client.Addr":"[::1]:34936","client.HeartbeatTime":1677659779,"client.LoginTime":1677659748,"client.UserID":"施之常","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:45:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660324699-823709\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:45:24+08:00"}
{"addr":"[::1]:32968","data":"{\"seq\":\"1677660324699-823709\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:45:24+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:45:24+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660294,"IsLogoff":false,"LoginTime":1677660294,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:45:24+08:00","userKey":"0_宓不齐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMzI0Njk5LTgyMzcwOSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:45:24+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:45:49+08:00"}
{"client.Addr":"[::1]:53866","client.HeartbeatTime":1677659896,"client.LoginTime":1677659806,"client.UserID":"左人郢","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:45:49+08:00"}
{"client.Addr":"[::1]:59224","client.HeartbeatTime":1677659956,"client.LoginTime":1677659926,"client.UserID":"张纮","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:45:49+08:00"}
{"client.Addr":"[::1]:34936","client.HeartbeatTime":1677659779,"client.LoginTime":1677659748,"client.UserID":"施之常","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:45:49+08:00"}
{"client.Addr":"[::1]:50428","client.HeartbeatTime":1677659719,"client.LoginTime":1677659719,"client.UserID":"司马恂","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:45:49+08:00"}
{"client.Addr":"[::1]:40412","client.HeartbeatTime":1677659920,"client.LoginTime":1677659920,"client.UserID":"司马相如","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:389","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T16:45:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660354706-960206\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:45:54+08:00"}
{"addr":"[::1]:32968","data":"{\"seq\":\"1677660354706-960206\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:45:54+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:45:54+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660324,"IsLogoff":false,"LoginTime":1677660294,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:45:54+08:00","userKey":"0_宓不齐"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMzU0NzA2LTk2MDIwNiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:45:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660361385-445973\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:46:01+08:00"}
{"addr":"[::1]:39444","data":"{\"seq\":\"1677660361385-445973\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:46:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:46:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660301,"IsLogoff":false,"LoginTime":1677659853,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:46:01+08:00","userKey":"0_兰陵王"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwMzYxMzg1LTQ0NTk3MyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:46:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:46:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:46:38+08:00"}
{"currentTime":1677660400,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:46:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:46:41+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:46:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.77 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:46:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:46:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:39094","time":"2023-03-01T16:46:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:39094","time":"2023-03-01T16:46:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660403221-330450\",\"cmd\":\"login\",\"data\":{\"userID\":\"者勒蔑\",\"appID\":0}}","time":"2023-03-01T16:46:43+08:00"}
{"addr":"[::1]:39094","data":"{\"seq\":\"1677660403221-330450\",\"cmd\":\"login\",\"data\":{\"userID\":\"者勒蔑\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:46:43+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwNDAzMjIxLTMzMDQ1MCIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:46:43+08:00"}
{"Addr":"[::1]:39094","RoomID":0,"UserID":"者勒蔑","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:46:43+08:00"}
{"AppId":0,"RoomID":101,"UserId":"者勒蔑","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:46:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.35 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:46:43+08:00"}
{"Addr":"[::1]:39094","RoomID":101,"UserID":"者勒蔑","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:46:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:46:43+08:00","valByte":"[\"172.30.33.105:9001\",\"1677660400\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"265860205","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:46:43+08:00","userID":"者勒蔑"}
{"appID":0,"data":"{\"seq\":\"265860205\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"者勒蔑\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:46:43+08:00","userID":"者勒蔑"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.44 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:46:43+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:46:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:46:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.34 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:46:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:47:11+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660433223-579930\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:47:13+08:00"}
{"addr":"[::1]:39094","data":"{\"seq\":\"1677660433223-579930\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:47:13+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:47:13+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660403,"IsLogoff":false,"LoginTime":1677660403,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:47:13+08:00","userKey":"0_者勒蔑"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwNDMzMjIzLTU3OTkzMCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:47:13+08:00"}
{"currentTime":1677660460,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:47:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:47:41+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660463236-802656\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:47:43+08:00"}
{"addr":"[::1]:39094","data":"{\"seq\":\"1677660463236-802656\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:47:43+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:47:43+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660433,"IsLogoff":false,"LoginTime":1677660403,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:47:43+08:00","userKey":"0_者勒蔑"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwNDYzMjM2LTgwMjY1NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:47:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T16:48:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T16:48:35+08:00"}
{"currentTime":1677660517,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:48:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:48:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.88 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:48:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:48:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:41460","time":"2023-03-01T16:48:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:41460","time":"2023-03-01T16:48:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660517802-947512\",\"cmd\":\"login\",\"data\":{\"userID\":\"范椁\",\"appID\":0}}","time":"2023-03-01T16:48:37+08:00"}
{"addr":"[::1]:41460","data":"{\"seq\":\"1677660517802-947512\",\"cmd\":\"login\",\"data\":{\"userID\":\"范椁\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:48:37+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwNTE3ODAyLTk0NzUxMiIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:48:37+08:00"}
{"Addr":"[::1]:41460","RoomID":0,"UserID":"范椁","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:48:37+08:00"}
{"AppId":0,"RoomID":101,"UserId":"范椁","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:48:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.41 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:48:37+08:00"}
{"Addr":"[::1]:41460","RoomID":101,"UserID":"范椁","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:48:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:48:37+08:00","valByte":"[\"172.30.33.105:9001\",\"1677660517\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"855263811","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:48:37+08:00","userID":"范椁"}
{"appID":0,"data":"{\"seq\":\"855263811\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"范椁\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:48:37+08:00","userID":"范椁"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.42 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:48:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:48:38+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:48:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:48:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.18 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:48:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660547803-785558\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:49:07+08:00"}
{"addr":"[::1]:41460","data":"{\"seq\":\"1677660547803-785558\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:49:07+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:49:07+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660517,"IsLogoff":false,"LoginTime":1677660517,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:49:07+08:00","userKey":"0_范椁"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwNTQ3ODAzLTc4NTU1OCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:49:07+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:49:08+08:00"}
{"currentTime":1677660577,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:49:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660577808-269906\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:49:37+08:00"}
{"addr":"[::1]:41460","data":"{\"seq\":\"1677660577808-269906\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:49:37+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:49:37+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660547,"IsLogoff":false,"LoginTime":1677660517,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:49:37+08:00","userKey":"0_范椁"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwNTc3ODA4LTI2OTkwNiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:49:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:49:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660607804-563541\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:50:07+08:00"}
{"addr":"[::1]:41460","data":"{\"seq\":\"1677660607804-563541\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:50:07+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:50:07+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660577,"IsLogoff":false,"LoginTime":1677660517,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:50:07+08:00","userKey":"0_范椁"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwNjA3ODA0LTU2MzU0MSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:50:07+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:50:08+08:00"}
{"currentTime":1677660637,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:50:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660637814-817832\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:50:37+08:00"}
{"addr":"[::1]:41460","data":"{\"seq\":\"1677660637814-817832\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:50:37+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:50:37+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660607,"IsLogoff":false,"LoginTime":1677660517,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:50:37+08:00","userKey":"0_范椁"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwNjM3ODE0LTgxNzgzMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:50:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:50:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660667812-344798\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:51:07+08:00"}
{"addr":"[::1]:41460","data":"{\"seq\":\"1677660667812-344798\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:51:07+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:51:07+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660637,"IsLogoff":false,"LoginTime":1677660517,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:51:07+08:00","userKey":"0_范椁"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwNjY3ODEyLTM0NDc5OCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:51:07+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:51:08+08:00"}
{"currentTime":1677660697,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:51:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660697814-805171\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:51:37+08:00"}
{"addr":"[::1]:41460","data":"{\"seq\":\"1677660697814-805171\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:51:37+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:51:37+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660667,"IsLogoff":false,"LoginTime":1677660517,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:51:37+08:00","userKey":"0_范椁"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwNjk3ODE0LTgwNTE3MSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:51:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:51:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660727816-540623\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:52:07+08:00"}
{"addr":"[::1]:41460","data":"{\"seq\":\"1677660727816-540623\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:52:07+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:52:07+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660697,"IsLogoff":false,"LoginTime":1677660517,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:52:07+08:00","userKey":"0_范椁"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwNzI3ODE2LTU0MDYyMyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:52:07+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:52:08+08:00"}
{"currentTime":1677660757,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:52:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660757809-352632\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:52:37+08:00"}
{"addr":"[::1]:41460","data":"{\"seq\":\"1677660757809-352632\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:52:37+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:52:37+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660727,"IsLogoff":false,"LoginTime":1677660517,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:52:37+08:00","userKey":"0_范椁"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwNzU3ODA5LTM1MjYzMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:52:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:52:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660787820-264998\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:53:07+08:00"}
{"addr":"[::1]:41460","data":"{\"seq\":\"1677660787820-264998\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:53:07+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:53:07+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660757,"IsLogoff":false,"LoginTime":1677660517,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:53:07+08:00","userKey":"0_范椁"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwNzg3ODIwLTI2NDk5OCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:53:07+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:53:08+08:00"}
{"currentTime":1677660817,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:53:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660817816-327115\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:53:37+08:00"}
{"addr":"[::1]:41460","data":"{\"seq\":\"1677660817816-327115\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:53:37+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:53:37+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660787,"IsLogoff":false,"LoginTime":1677660517,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:53:37+08:00","userKey":"0_范椁"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwODE3ODE2LTMyNzExNSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:53:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:53:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:54:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.34 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:54:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:54:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:47250","time":"2023-03-01T16:54:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:47250","time":"2023-03-01T16:54:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660846462-986967\",\"cmd\":\"login\",\"data\":{\"userID\":\"司马耕\",\"appID\":0}}","time":"2023-03-01T16:54:06+08:00"}
{"addr":"[::1]:47250","data":"{\"seq\":\"1677660846462-986967\",\"cmd\":\"login\",\"data\":{\"userID\":\"司马耕\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:54:06+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwODQ2NDYyLTk4Njk2NyIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:54:06+08:00"}
{"Addr":"[::1]:47250","RoomID":0,"UserID":"司马耕","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:54:06+08:00"}
{"AppId":0,"RoomID":101,"UserId":"司马耕","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:54:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.47 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:54:06+08:00"}
{"Addr":"[::1]:47250","RoomID":101,"UserID":"司马耕","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:54:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:54:06+08:00","valByte":"[\"172.30.33.105:9001\",\"1677660817\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"558784842","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:54:06+08:00","userID":"司马耕"}
{"appID":0,"data":"{\"seq\":\"558784842\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"司马耕\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:54:06+08:00","userID":"司马耕"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.64 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:54:06+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:54:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:54:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.34 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:54:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:54:08+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660848389-775366\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:54:08+08:00"}
{"addr":"[::1]:41460","data":"{\"seq\":\"1677660848389-775366\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:54:08+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:54:08+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660817,"IsLogoff":false,"LoginTime":1677660517,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:54:08+08:00","userKey":"0_范椁"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwODQ4Mzg5LTc3NTM2NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:54:08+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/systems/system.go:17","func":"bychat/api/v1/systems.Status","level":"info","msg":"http_request 查询系统状态","time":"2023-03-01T16:54:09+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.22 method:GET statusCode:200 uri:/system/state]","time":"2023-03-01T16:54:09+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:60","func":"bychat/api/v1/user.SendMessageAll","level":"info","message":"你要打打字","msg":"SendMessageAll","msgID":"1677660856175-288171","roomID":101,"time":"2023-03-01T16:54:16+08:00","userID":"范椁"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:54:16+08:00","valByte":"[\"172.30.33.105:9001\",\"1677660817\"]"}
{"appID":0,"cmd":"msg","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"你要打打字","msg":"SendUserMessageAll","msgID":"1677660856175-288171","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:54:16+08:00","userID":"范椁"}
{"appID":0,"data":"{\"seq\":\"1677660856175-288171\",\"cmd\":\"msg\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"你要打打字\",\"from\":\"范椁\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:54:16+08:00","userID":"范椁"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:2.02 method:POST statusCode:200 uri:/user/sendMessageAll]","time":"2023-03-01T16:54:16+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T16:54:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:6.14 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T16:54:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:54:28+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:44098","time":"2023-03-01T16:54:28+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:44098","time":"2023-03-01T16:54:28+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660868707-742377\",\"cmd\":\"login\",\"data\":{\"userID\":\"张衡\",\"appID\":0}}","time":"2023-03-01T16:54:28+08:00"}
{"addr":"[::1]:44098","data":"{\"seq\":\"1677660868707-742377\",\"cmd\":\"login\",\"data\":{\"userID\":\"张衡\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:54:28+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwODY4NzA3LTc0MjM3NyIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:54:28+08:00"}
{"Addr":"[::1]:44098","RoomID":0,"UserID":"张衡","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:54:28+08:00"}
{"AppId":0,"RoomID":101,"UserId":"张衡","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:54:28+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.51 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:54:28+08:00"}
{"Addr":"[::1]:44098","RoomID":101,"UserID":"张衡","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:54:28+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:54:28+08:00","valByte":"[\"172.30.33.105:9001\",\"1677660817\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"944182101","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:54:28+08:00","userID":"张衡"}
{"appID":0,"data":"{\"seq\":\"944182101\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"张衡\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T16:54:28+08:00","userID":"张衡"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.99 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T16:54:28+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T16:54:29+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T16:54:29+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.31 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T16:54:29+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页102","time":"2023-03-01T16:54:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:2.47 method:GET statusCode:200 uri:/home/index?roomID=102]","time":"2023-03-01T16:54:35+08:00"}
{"Addr":"[::1]:44098","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T16:54:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:44098 0xc0000c6000 0xc000600180 1677660868 1677660868 1677660868 0xc0000fe120}","time":"2023-03-01T16:54:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T16:54:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:56910","time":"2023-03-01T16:54:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:232","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:56910","time":"2023-03-01T16:54:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660875431-141186\",\"cmd\":\"login\",\"data\":{\"userID\":\"唐伯虎\",\"appID\":0}}","time":"2023-03-01T16:54:35+08:00"}
{"addr":"[::1]:56910","data":"{\"seq\":\"1677660875431-141186\",\"cmd\":\"login\",\"data\":{\"userID\":\"唐伯虎\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:54:35+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwODc1NDMxLTE0MTE4NiIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T16:54:35+08:00"}
{"Addr":"[::1]:56910","RoomID":0,"UserID":"唐伯虎","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:258","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T16:54:35+08:00"}
{"AppId":0,"RoomID":102,"UserId":"唐伯虎","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:148","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T16:54:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.19 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T16:54:35+08:00"}
{"Addr":"[::1]:56910","RoomID":102,"UserID":"唐伯虎","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:275","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T16:54:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T16:54:35+08:00","valByte":"[\"172.30.33.105:9001\",\"1677660817\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"466555962","roomID":102,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T16:54:35+08:00","userID":"唐伯虎"}
{"appID":0,"data":"{\"seq\":\"466555962\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"唐伯虎\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":102,"time":"2023-03-01T16:54:35+08:00","userID":"唐伯虎"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.5 method:GET statusCode:200 uri:/user/historyMessageList?roomID=102\u0026start=0\u0026limit=5]","time":"2023-03-01T16:54:35+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:34","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:102","roomID":102,"time":"2023-03-01T16:54:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":102,"time":"2023-03-01T16:54:35+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.19 method:GET statusCode:200 uri:/user/list?roomID=102]","time":"2023-03-01T16:54:35+08:00"}
{"currentTime":1677660877,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T16:54:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660877390-978994\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:54:37+08:00"}
{"addr":"[::1]:47250","data":"{\"seq\":\"1677660877390-978994\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:54:37+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:54:37+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660846,"IsLogoff":false,"LoginTime":1677660846,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:54:37+08:00","userKey":"0_司马耕"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwODc3MzkwLTk3ODk5NCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:54:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:54:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660878394-819237\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:54:38+08:00"}
{"addr":"[::1]:41460","data":"{\"seq\":\"1677660878394-819237\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:54:38+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:54:38+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660848,"IsLogoff":false,"LoginTime":1677660517,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:54:38+08:00","userKey":"0_范椁"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwODc4Mzk0LTgxOTIzNyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:54:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660906394-616427\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:55:06+08:00"}
{"addr":"[::1]:56910","data":"{\"seq\":\"1677660906394-616427\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:55:06+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:55:06+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660875,"IsLogoff":false,"LoginTime":1677660875,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:55:06+08:00","userKey":"0_唐伯虎"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwOTA2Mzk0LTYxNjQyNyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:55:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660907407-295247\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:55:07+08:00"}
{"addr":"[::1]:47250","data":"{\"seq\":\"1677660907407-295247\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:55:07+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:55:07+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660877,"IsLogoff":false,"LoginTime":1677660846,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:55:07+08:00","userKey":"0_司马耕"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwOTA3NDA3LTI5NTI0NyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:55:07+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T16:55:08+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677660908384-950594\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T16:55:08+08:00"}
{"addr":"[::1]:41460","data":"{\"seq\":\"1677660908384-950594\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T16:55:08+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T16:55:08+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677660878,"IsLogoff":false,"LoginTime":1677660517,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T16:55:08+08:00","userKey":"0_范椁"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYwOTA4Mzg0LTk1MDU5NCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T16:55:08+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T17:15:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T17:15:44+08:00"}
{"currentTime":1677662146,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:15:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:15:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T17:15:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:2.59 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T17:15:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T17:15:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:49490","time":"2023-03-01T17:15:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:233","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:49490","time":"2023-03-01T17:15:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662149467-455654\",\"cmd\":\"login\",\"data\":{\"userID\":\"苏洵\",\"appID\":0}}","time":"2023-03-01T17:15:49+08:00"}
{"addr":"[::1]:49490","data":"{\"seq\":\"1677662149467-455654\",\"cmd\":\"login\",\"data\":{\"userID\":\"苏洵\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:15:49+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMTQ5NDY3LTQ1NTY1NCIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T17:15:49+08:00"}
{"Addr":"[::1]:49490","RoomID":0,"UserID":"苏洵","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:259","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T17:15:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:126","func":"bychat/api/v1/user.EnterRoom","level":"error","msg":"EnterRoom Param FailedKey: 'Param.RoomID' Error:Field validation for 'RoomID' failed on the 'required' tag","time":"2023-03-01T17:15:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.48 method:POST statusCode:400 uri:/user/enter]","time":"2023-03-01T17:15:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.04 method:GET statusCode:200 uri:/user/list?roomID=undefined]","time":"2023-03-01T17:15:49+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:16:17+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662179474-687016\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:16:19+08:00"}
{"addr":"[::1]:49490","data":"{\"seq\":\"1677662179474-687016\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:16:19+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:16:19+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662149,"IsLogoff":false,"LoginTime":1677662149,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:16:19+08:00","userKey":"0_苏洵"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMTc5NDc0LTY4NzAxNiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:16:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T17:16:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.91 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T17:16:32+08:00"}
{"Addr":"[::1]:49490","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T17:16:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:49490 0xc0008ec420 0xc00070ac60 1677662149 1677662179 1677662149 0xc00072a360}","time":"2023-03-01T17:16:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T17:16:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:49134","time":"2023-03-01T17:16:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:233","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:49134","time":"2023-03-01T17:16:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662192943-741547\",\"cmd\":\"login\",\"data\":{\"userID\":\"高望\",\"appID\":0}}","time":"2023-03-01T17:16:32+08:00"}
{"addr":"[::1]:49134","data":"{\"seq\":\"1677662192943-741547\",\"cmd\":\"login\",\"data\":{\"userID\":\"高望\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:16:32+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMTkyOTQzLTc0MTU0NyIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T17:16:32+08:00"}
{"Addr":"[::1]:49134","RoomID":0,"UserID":"高望","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:259","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T17:16:32+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:41","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T17:16:33+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T17:16:33+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.27 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T17:16:33+08:00"}
{"AppId":0,"RoomID":101,"UserId":"高望","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:146","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:16:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.41 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T17:16:38+08:00"}
{"Addr":"[::1]:49134","RoomID":101,"UserID":"高望","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:276","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T17:16:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:16:38+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662146\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"685745548","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:16:38+08:00","userID":"高望"}
{"appID":0,"data":"{\"seq\":\"685745548\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"高望\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T17:16:38+08:00","userID":"高望"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.74 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T17:16:38+08:00"}
{"currentTime":1677662206,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:16:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:16:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T17:16:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:3.12 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T17:16:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T17:16:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:59458","time":"2023-03-01T17:16:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:233","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:59458","time":"2023-03-01T17:16:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662215593-436206\",\"cmd\":\"login\",\"data\":{\"userID\":\"司马懿\",\"appID\":0}}","time":"2023-03-01T17:16:55+08:00"}
{"addr":"[::1]:59458","data":"{\"seq\":\"1677662215593-436206\",\"cmd\":\"login\",\"data\":{\"userID\":\"司马懿\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:16:55+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMjE1NTkzLTQzNjIwNiIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T17:16:55+08:00"}
{"Addr":"[::1]:59458","RoomID":0,"UserID":"司马懿","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:259","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T17:16:55+08:00"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:41","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T17:16:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T17:16:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.2 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T17:16:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662223386-236907\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:17:03+08:00"}
{"addr":"[::1]:49134","data":"{\"seq\":\"1677662223386-236907\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:17:03+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:17:03+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662192,"IsLogoff":false,"LoginTime":1677662192,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:17:03+08:00","userKey":"0_高望"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMjIzMzg2LTIzNjkwNyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:17:03+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:17:17+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662245597-487144\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:17:25+08:00"}
{"addr":"[::1]:59458","data":"{\"seq\":\"1677662245597-487144\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:17:25+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:17:25+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662215,"IsLogoff":false,"LoginTime":1677662215,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:17:25+08:00","userKey":"0_司马懿"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMjQ1NTk3LTQ4NzE0NCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:17:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662253398-398752\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:17:33+08:00"}
{"addr":"[::1]:49134","data":"{\"seq\":\"1677662253398-398752\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:17:33+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:17:33+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662223,"IsLogoff":false,"LoginTime":1677662192,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:17:33+08:00","userKey":"0_高望"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMjUzMzk4LTM5ODc1MiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:17:33+08:00"}
{"currentTime":1677662266,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:17:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:17:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T17:18:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T17:18:37+08:00"}
{"currentTime":1677662319,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:18:39+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T17:18:39+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.31 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T17:18:39+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T17:18:39+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:50350","time":"2023-03-01T17:18:39+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:233","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:50350","time":"2023-03-01T17:18:39+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662320013-952803\",\"cmd\":\"login\",\"data\":{\"userID\":\"薛德音\",\"appID\":0}}","time":"2023-03-01T17:18:40+08:00"}
{"addr":"[::1]:50350","data":"{\"seq\":\"1677662320013-952803\",\"cmd\":\"login\",\"data\":{\"userID\":\"薛德音\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:18:40+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMzIwMDEzLTk1MjgwMyIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T17:18:40+08:00"}
{"Addr":"[::1]:50350","RoomID":0,"UserID":"薛德音","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:259","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T17:18:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:18:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T17:18:41+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:2.56 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T17:18:41+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T17:18:41+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:50354","time":"2023-03-01T17:18:41+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:233","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:50354","time":"2023-03-01T17:18:41+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662322079-232116\",\"cmd\":\"login\",\"data\":{\"userID\":\"闵损\",\"appID\":0}}","time":"2023-03-01T17:18:42+08:00"}
{"addr":"[::1]:50354","data":"{\"seq\":\"1677662322079-232116\",\"cmd\":\"login\",\"data\":{\"userID\":\"闵损\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:18:42+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMzIyMDc5LTIzMjExNiIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T17:18:42+08:00"}
{"Addr":"[::1]:50354","RoomID":0,"UserID":"闵损","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:259","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T17:18:42+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T17:18:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.73 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T17:18:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T17:18:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:59020","time":"2023-03-01T17:18:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:233","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:59020","time":"2023-03-01T17:18:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662324196-981299\",\"cmd\":\"login\",\"data\":{\"userID\":\"杜如悔\",\"appID\":0}}","time":"2023-03-01T17:18:44+08:00"}
{"addr":"[::1]:59020","data":"{\"seq\":\"1677662324196-981299\",\"cmd\":\"login\",\"data\":{\"userID\":\"杜如悔\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:18:44+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMzI0MTk2LTk4MTI5OSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T17:18:44+08:00"}
{"Addr":"[::1]:59020","RoomID":0,"UserID":"杜如悔","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:259","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T17:18:44+08:00"}
{"AppId":0,"RoomID":101,"UserId":"闵损","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:146","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:18:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.24 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T17:18:47+08:00"}
{"Addr":"[::1]:50354","RoomID":101,"UserID":"闵损","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:276","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T17:18:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:18:47+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662319\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"238035466","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:18:47+08:00","userID":"闵损"}
{"appID":0,"data":"{\"seq\":\"238035466\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"闵损\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T17:18:47+08:00","userID":"闵损"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:41","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T17:18:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T17:18:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.17 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T17:18:47+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.25 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T17:18:47+08:00"}
{"AppId":0,"RoomID":101,"UserId":"薛德音","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:146","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:18:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.21 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T17:18:50+08:00"}
{"Addr":"[::1]:50350","RoomID":101,"UserID":"薛德音","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:276","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T17:18:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:18:50+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662319\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"807412776","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:18:50+08:00","userID":"薛德音"}
{"appID":0,"data":"{\"seq\":\"807412776\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"薛德音\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T17:18:50+08:00","userID":"薛德音"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:41","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T17:18:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T17:18:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.2 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T17:18:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.35 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T17:18:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:73","func":"bychat/api/v1/user.SendMessageAll","level":"info","message":"是多少","msg":"SendMessageAll","msgID":"1677662335513-685872","roomID":101,"time":"2023-03-01T17:18:55+08:00","userID":"薛德音"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:18:55+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662319\"]"}
{"appID":0,"cmd":"msg","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"是多少","msg":"SendUserMessageAll","msgID":"1677662335513-685872","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:18:55+08:00","userID":"薛德音"}
{"appID":0,"data":"{\"seq\":\"1677662335513-685872\",\"cmd\":\"msg\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"是多少\",\"from\":\"薛德音\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T17:18:55+08:00","userID":"薛德音"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.82 method:POST statusCode:200 uri:/user/sendMessageAll]","time":"2023-03-01T17:18:55+08:00"}
{"AppId":0,"UserId":"闵损","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:159","func":"bychat/internal/servers/websocket.ExitRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:19:01+08:00"}
{"AppId":0,"UserId":"闵损","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:159","func":"bychat/internal/servers/websocket.ExitRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:19:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:19:10+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662350390-234312\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:19:10+08:00"}
{"addr":"[::1]:50350","data":"{\"seq\":\"1677662350390-234312\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:19:10+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:19:10+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662320,"IsLogoff":false,"LoginTime":1677662320,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:19:10+08:00","userKey":"0_薛德音"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMzUwMzkwLTIzNDMxMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:19:10+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662352082-501522\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:19:12+08:00"}
{"addr":"[::1]:50354","data":"{\"seq\":\"1677662352082-501522\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:19:12+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:19:12+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662322,"IsLogoff":false,"LoginTime":1677662322,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:19:12+08:00","userKey":"0_闵损"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMzUyMDgyLTUwMTUyMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:19:12+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662354393-604380\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:19:14+08:00"}
{"addr":"[::1]:59020","data":"{\"seq\":\"1677662354393-604380\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:19:14+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:19:14+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662324,"IsLogoff":false,"LoginTime":1677662324,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:19:14+08:00","userKey":"0_杜如悔"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMzU0MzkzLTYwNDM4MCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:19:14+08:00"}
{"currentTime":1677662379,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:19:39+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:19:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662380387-158495\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:19:40+08:00"}
{"addr":"[::1]:50350","data":"{\"seq\":\"1677662380387-158495\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:19:40+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:19:40+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662350,"IsLogoff":false,"LoginTime":1677662320,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:19:40+08:00","userKey":"0_薛德音"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMzgwMzg3LTE1ODQ5NSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:19:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662382081-379776\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:19:42+08:00"}
{"addr":"[::1]:50354","data":"{\"seq\":\"1677662382081-379776\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:19:42+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:19:42+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662352,"IsLogoff":false,"LoginTime":1677662322,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:19:42+08:00","userKey":"0_闵损"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMzgyMDgxLTM3OTc3NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:19:42+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662384398-238248\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:19:44+08:00"}
{"addr":"[::1]:59020","data":"{\"seq\":\"1677662384398-238248\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:19:44+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:19:44+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662354,"IsLogoff":false,"LoginTime":1677662324,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:19:44+08:00","userKey":"0_杜如悔"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyMzg0Mzk4LTIzODI0OCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:19:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:20:10+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662410394-574389\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:20:10+08:00"}
{"addr":"[::1]:50350","data":"{\"seq\":\"1677662410394-574389\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:20:10+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:20:10+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662380,"IsLogoff":false,"LoginTime":1677662320,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:20:10+08:00","userKey":"0_薛德音"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNDEwMzk0LTU3NDM4OSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:20:10+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662412094-898267\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:20:12+08:00"}
{"addr":"[::1]:50354","data":"{\"seq\":\"1677662412094-898267\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:20:12+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:20:12+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662382,"IsLogoff":false,"LoginTime":1677662322,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:20:12+08:00","userKey":"0_闵损"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNDEyMDk0LTg5ODI2NyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:20:12+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662414384-439030\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:20:14+08:00"}
{"addr":"[::1]:59020","data":"{\"seq\":\"1677662414384-439030\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:20:14+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:20:14+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662384,"IsLogoff":false,"LoginTime":1677662324,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:20:14+08:00","userKey":"0_杜如悔"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNDE0Mzg0LTQzOTAzMCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:20:14+08:00"}
{"currentTime":1677662439,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:20:39+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:20:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662440396-253472\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:20:40+08:00"}
{"addr":"[::1]:50350","data":"{\"seq\":\"1677662440396-253472\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:20:40+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:20:40+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662410,"IsLogoff":false,"LoginTime":1677662320,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:20:40+08:00","userKey":"0_薛德音"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNDQwMzk2LTI1MzQ3MiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:20:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662442086-420269\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:20:42+08:00"}
{"addr":"[::1]:50354","data":"{\"seq\":\"1677662442086-420269\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:20:42+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:20:42+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662412,"IsLogoff":false,"LoginTime":1677662322,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:20:42+08:00","userKey":"0_闵损"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNDQyMDg2LTQyMDI2OSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:20:42+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662444387-581084\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:20:44+08:00"}
{"addr":"[::1]:59020","data":"{\"seq\":\"1677662444387-581084\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:20:44+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:20:44+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662414,"IsLogoff":false,"LoginTime":1677662324,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:20:44+08:00","userKey":"0_杜如悔"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNDQ0Mzg3LTU4MTA4NCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:20:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:21:10+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662470394-832352\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:21:10+08:00"}
{"addr":"[::1]:50350","data":"{\"seq\":\"1677662470394-832352\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:21:10+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:21:10+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662440,"IsLogoff":false,"LoginTime":1677662320,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:21:10+08:00","userKey":"0_薛德音"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNDcwMzk0LTgzMjM1MiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:21:10+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662472087-219617\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:21:12+08:00"}
{"addr":"[::1]:50354","data":"{\"seq\":\"1677662472087-219617\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:21:12+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:21:12+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662442,"IsLogoff":false,"LoginTime":1677662322,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:21:12+08:00","userKey":"0_闵损"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNDcyMDg3LTIxOTYxNyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:21:12+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662474398-814296\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:21:14+08:00"}
{"addr":"[::1]:59020","data":"{\"seq\":\"1677662474398-814296\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:21:14+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:21:14+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662444,"IsLogoff":false,"LoginTime":1677662324,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:21:14+08:00","userKey":"0_杜如悔"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNDc0Mzk4LTgxNDI5NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:21:14+08:00"}
{"currentTime":1677662499,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:21:39+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:21:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662500398-806482\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:21:40+08:00"}
{"addr":"[::1]:50350","data":"{\"seq\":\"1677662500398-806482\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:21:40+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:21:40+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662470,"IsLogoff":false,"LoginTime":1677662320,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:21:40+08:00","userKey":"0_薛德音"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNTAwMzk4LTgwNjQ4MiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:21:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662502091-395522\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:21:42+08:00"}
{"addr":"[::1]:50354","data":"{\"seq\":\"1677662502091-395522\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:21:42+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:21:42+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662472,"IsLogoff":false,"LoginTime":1677662322,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:21:42+08:00","userKey":"0_闵损"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNTAyMDkxLTM5NTUyMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:21:42+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662504407-570123\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:21:44+08:00"}
{"addr":"[::1]:59020","data":"{\"seq\":\"1677662504407-570123\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:21:44+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:21:44+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662474,"IsLogoff":false,"LoginTime":1677662324,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:21:44+08:00","userKey":"0_杜如悔"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNTA0NDA3LTU3MDEyMyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:21:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:22:10+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662530390-405136\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:22:10+08:00"}
{"addr":"[::1]:50350","data":"{\"seq\":\"1677662530390-405136\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:22:10+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:22:10+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662500,"IsLogoff":false,"LoginTime":1677662320,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:22:10+08:00","userKey":"0_薛德音"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNTMwMzkwLTQwNTEzNiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:22:10+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662532089-217391\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:22:12+08:00"}
{"addr":"[::1]:50354","data":"{\"seq\":\"1677662532089-217391\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:22:12+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:22:12+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662502,"IsLogoff":false,"LoginTime":1677662322,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:22:12+08:00","userKey":"0_闵损"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNTMyMDg5LTIxNzM5MSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:22:12+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662534398-691097\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:22:14+08:00"}
{"addr":"[::1]:59020","data":"{\"seq\":\"1677662534398-691097\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:22:14+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:22:14+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662504,"IsLogoff":false,"LoginTime":1677662324,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:22:14+08:00","userKey":"0_杜如悔"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNTM0Mzk4LTY5MTA5NyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:22:14+08:00"}
{"currentTime":1677662559,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:22:39+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:22:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662560398-606707\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:22:40+08:00"}
{"addr":"[::1]:50350","data":"{\"seq\":\"1677662560398-606707\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:22:40+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:22:40+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662530,"IsLogoff":false,"LoginTime":1677662320,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:22:40+08:00","userKey":"0_薛德音"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNTYwMzk4LTYwNjcwNyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:22:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662562081-494371\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:22:42+08:00"}
{"addr":"[::1]:50354","data":"{\"seq\":\"1677662562081-494371\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:22:42+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:22:42+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662532,"IsLogoff":false,"LoginTime":1677662322,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:22:42+08:00","userKey":"0_闵损"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNTYyMDgxLTQ5NDM3MSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:22:42+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662564396-632375\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:22:44+08:00"}
{"addr":"[::1]:59020","data":"{\"seq\":\"1677662564396-632375\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:22:44+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:22:44+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662534,"IsLogoff":false,"LoginTime":1677662324,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:22:44+08:00","userKey":"0_杜如悔"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNTY0Mzk2LTYzMjM3NSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:22:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:23:10+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662590392-726029\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:23:10+08:00"}
{"addr":"[::1]:50350","data":"{\"seq\":\"1677662590392-726029\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:23:10+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:23:10+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662560,"IsLogoff":false,"LoginTime":1677662320,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:23:10+08:00","userKey":"0_薛德音"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNTkwMzkyLTcyNjAyOSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:23:10+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662592084-379182\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:23:12+08:00"}
{"addr":"[::1]:50354","data":"{\"seq\":\"1677662592084-379182\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:23:12+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:23:12+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662562,"IsLogoff":false,"LoginTime":1677662322,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:23:12+08:00","userKey":"0_闵损"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNTkyMDg0LTM3OTE4MiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:23:12+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662594395-337001\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:23:14+08:00"}
{"addr":"[::1]:59020","data":"{\"seq\":\"1677662594395-337001\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:23:14+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:23:14+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662564,"IsLogoff":false,"LoginTime":1677662324,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:23:14+08:00","userKey":"0_杜如悔"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNTk0Mzk1LTMzNzAwMSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:23:14+08:00"}
{"currentTime":1677662619,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:23:39+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:23:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662620393-528993\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:23:40+08:00"}
{"addr":"[::1]:50350","data":"{\"seq\":\"1677662620393-528993\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:23:40+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:23:40+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662590,"IsLogoff":false,"LoginTime":1677662320,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:23:40+08:00","userKey":"0_薛德音"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNjIwMzkzLTUyODk5MyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:23:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662622081-921423\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:23:42+08:00"}
{"addr":"[::1]:50354","data":"{\"seq\":\"1677662622081-921423\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:23:42+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:23:42+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662592,"IsLogoff":false,"LoginTime":1677662322,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:23:42+08:00","userKey":"0_闵损"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNjIyMDgxLTkyMTQyMyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:23:42+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662624394-605771\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:23:44+08:00"}
{"addr":"[::1]:59020","data":"{\"seq\":\"1677662624394-605771\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:23:44+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:23:44+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662594,"IsLogoff":false,"LoginTime":1677662324,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:23:44+08:00","userKey":"0_杜如悔"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNjI0Mzk0LTYwNTc3MSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:23:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T17:25:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T17:25:34+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T17:25:40+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T17:25:40+08:00"}
{"currentTime":1677662742,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:25:42+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T17:25:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.72 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T17:25:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T17:25:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:42456","time":"2023-03-01T17:25:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:233","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:42456","time":"2023-03-01T17:25:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662743275-853605\",\"cmd\":\"login\",\"data\":{\"userID\":\"吴承恩\",\"appID\":0}}","time":"2023-03-01T17:25:43+08:00"}
{"addr":"[::1]:42456","data":"{\"seq\":\"1677662743275-853605\",\"cmd\":\"login\",\"data\":{\"userID\":\"吴承恩\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:25:43+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNzQzMjc1LTg1MzYwNSIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T17:25:43+08:00"}
{"Addr":"[::1]:42456","RoomID":0,"UserID":"吴承恩","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:259","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T17:25:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:25:43+08:00"}
{"AppId":0,"RoomID":101,"UserId":"吴承恩","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:146","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:25:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.32 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T17:25:44+08:00"}
{"Addr":"[::1]:42456","RoomID":101,"UserID":"吴承恩","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:276","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T17:25:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:25:44+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662742\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"517182551","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:25:44+08:00","userID":"吴承恩"}
{"appID":0,"data":"{\"seq\":\"517182551\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"吴承恩\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T17:25:44+08:00","userID":"吴承恩"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:41","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T17:25:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T17:25:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.32 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T17:25:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.36 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T17:25:44+08:00"}
{"AppId":0,"UserId":"吴承恩","client":101,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:160","func":"bychat/internal/servers/websocket.ExitRoom","level":"info","msg":"webSocket_request 离开房间接口","time":"2023-03-01T17:25:45+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662773287-225785\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:26:13+08:00"}
{"addr":"[::1]:42456","data":"{\"seq\":\"1677662773287-225785\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:26:13+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:26:13+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662743,"IsLogoff":false,"LoginTime":1677662743,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:26:13+08:00","userKey":"0_吴承恩"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyNzczMjg3LTIyNTc4NSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:26:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:26:13+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:35","func":"bychat/lib/redislib.ExampleNewClient","level":"info","msg":"初始化redis:PONG","time":"2023-03-01T17:26:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.33.105:9001","time":"2023-03-01T17:26:57+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T17:26:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.9 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T17:26:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T17:26:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:40912","time":"2023-03-01T17:26:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:234","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:40912","time":"2023-03-01T17:26:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662819794-776220\",\"cmd\":\"login\",\"data\":{\"userID\":\"贾谊\",\"appID\":0}}","time":"2023-03-01T17:26:59+08:00"}
{"addr":"[::1]:40912","data":"{\"seq\":\"1677662819794-776220\",\"cmd\":\"login\",\"data\":{\"userID\":\"贾谊\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:26:59+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyODE5Nzk0LTc3NjIyMCIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T17:26:59+08:00"}
{"Addr":"[::1]:40912","RoomID":0,"UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:260","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T17:26:59+08:00"}
{"currentTime":1677662819,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:26:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:27:00+08:00"}
{"AppId":0,"RoomID":101,"UserId":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:146","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:27:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.21 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T17:27:02+08:00"}
{"Addr":"[::1]:40912","RoomID":101,"UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:277","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T17:27:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:27:02+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662819\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"267664198","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:27:02+08:00","userID":"贾谊"}
{"appID":0,"data":"{\"seq\":\"267664198\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"贾谊\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T17:27:02+08:00","userID":"贾谊"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:41","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T17:27:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T17:27:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.16 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T17:27:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.26 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T17:27:02+08:00"}
{"AppId":0,"UserId":"贾谊","client":101,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:160","func":"bychat/internal/servers/websocket.ExitRoom","level":"info","msg":"webSocket_request 离开房间接口","time":"2023-03-01T17:27:03+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.22 method:POST statusCode:200 uri:/user/exit]","time":"2023-03-01T17:27:03+08:00"}
{"Addr":"[::1]:40912","RoomID":101,"UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:296","func":"bychat/internal/servers/websocket.(*ClientManager).EventExitRoom","level":"info","msg":"EventEnterRoom 用户离开房间","time":"2023-03-01T17:27:03+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:27:03+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662819\"]"}
{"appID":0,"cmd":"exit","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"用户已经离开~","msg":"SendUserMessageAll","msgID":"874870048","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:27:03+08:00","userID":"贾谊"}
{"appID":0,"data":"{\"seq\":\"874870048\",\"cmd\":\"exit\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"用户已经离开~\",\"from\":\"贾谊\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T17:27:03+08:00","userID":"贾谊"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T17:27:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:2.8 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T17:27:19+08:00"}
{"Addr":"[::1]:40912","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T17:27:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:40912 0xc000158000 0xc0004ba060 1677662819 1677662819 1677662819 0xc0001986c0}","time":"2023-03-01T17:27:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T17:27:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:52802","time":"2023-03-01T17:27:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:234","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:52802","time":"2023-03-01T17:27:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662839692-400957\",\"cmd\":\"login\",\"data\":{\"userID\":\"荣旗\",\"appID\":0}}","time":"2023-03-01T17:27:19+08:00"}
{"addr":"[::1]:52802","data":"{\"seq\":\"1677662839692-400957\",\"cmd\":\"login\",\"data\":{\"userID\":\"荣旗\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:27:19+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyODM5NjkyLTQwMDk1NyIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T17:27:19+08:00"}
{"Addr":"[::1]:52802","RoomID":0,"UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:260","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T17:27:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T17:27:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.69 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T17:27:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T17:27:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:52808","time":"2023-03-01T17:27:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:234","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:52808","time":"2023-03-01T17:27:21+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662841506-818003\",\"cmd\":\"login\",\"data\":{\"userID\":\"韩王韩信\",\"appID\":0}}","time":"2023-03-01T17:27:21+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677662841506-818003\",\"cmd\":\"login\",\"data\":{\"userID\":\"韩王韩信\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:27:21+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyODQxNTA2LTgxODAwMyIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T17:27:21+08:00"}
{"Addr":"[::1]:52808","RoomID":0,"UserID":"韩王韩信","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:260","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T17:27:21+08:00"}
{"AppId":0,"RoomID":101,"UserId":"韩王韩信","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:146","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:27:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.19 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T17:27:25+08:00"}
{"Addr":"[::1]:52808","RoomID":101,"UserID":"韩王韩信","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:277","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T17:27:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:27:25+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662819\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"822589991","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:27:25+08:00","userID":"韩王韩信"}
{"appID":0,"data":"{\"seq\":\"822589991\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"韩王韩信\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T17:27:25+08:00","userID":"韩王韩信"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:41","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T17:27:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T17:27:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.18 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T17:27:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.23 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T17:27:25+08:00"}
{"AppId":0,"RoomID":101,"UserId":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:146","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:27:28+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.32 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T17:27:28+08:00"}
{"Addr":"[::1]:52802","RoomID":101,"UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:277","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T17:27:28+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:27:28+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662819\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"164293990","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:27:28+08:00","userID":"荣旗"}
{"appID":0,"data":"{\"seq\":\"164293990\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"荣旗\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T17:27:28+08:00","userID":"荣旗"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:41","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T17:27:28+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T17:27:28+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.19 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T17:27:28+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.33 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T17:27:28+08:00"}
{"AppId":0,"UserId":"荣旗","client":101,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:160","func":"bychat/internal/servers/websocket.ExitRoom","level":"info","msg":"webSocket_request 离开房间接口","time":"2023-03-01T17:27:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.17 method:POST statusCode:200 uri:/user/exit]","time":"2023-03-01T17:27:30+08:00"}
{"Addr":"[::1]:52802","RoomID":101,"UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:296","func":"bychat/internal/servers/websocket.(*ClientManager).EventExitRoom","level":"info","msg":"EventEnterRoom 用户离开房间","time":"2023-03-01T17:27:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:27:30+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662819\"]"}
{"appID":0,"cmd":"exit","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"用户已经离开~","msg":"SendUserMessageAll","msgID":"137208617","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:27:30+08:00","userID":"荣旗"}
{"appID":0,"data":"{\"seq\":\"137208617\",\"cmd\":\"exit\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"用户已经离开~\",\"from\":\"荣旗\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T17:27:30+08:00","userID":"荣旗"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:27:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/systems/system.go:17","func":"bychat/api/v1/systems.Status","level":"info","msg":"http_request 查询系统状态","time":"2023-03-01T17:27:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.69 method:GET statusCode:200 uri:/system/state]","time":"2023-03-01T17:27:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662870396-970897\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:27:50+08:00"}
{"addr":"[::1]:52802","data":"{\"seq\":\"1677662870396-970897\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:27:50+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:27:50+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662839,"IsLogoff":false,"LoginTime":1677662839,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:27:50+08:00","userKey":"0_荣旗"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyODcwMzk2LTk3MDg5NyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:27:50+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662872396-336755\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:27:52+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677662872396-336755\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:27:52+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:27:52+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662841,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:27:52+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyODcyMzk2LTMzNjc1NSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:27:52+08:00"}
{"currentTime":1677662879,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:27:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:28:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662899871-310390\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:28:19+08:00"}
{"addr":"[::1]:52802","data":"{\"seq\":\"1677662899871-310390\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:28:19+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:28:19+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662870,"IsLogoff":false,"LoginTime":1677662839,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:28:19+08:00","userKey":"0_荣旗"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyODk5ODcxLTMxMDM5MCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:28:19+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662902392-701279\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:28:22+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677662902392-701279\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:28:22+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:28:22+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662872,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:28:22+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyOTAyMzkyLTcwMTI3OSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:28:22+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:28:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T17:28:33+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.27 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T17:28:33+08:00"}
{"Addr":"[::1]:52802","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T17:28:33+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:52802 0xc0003466e0 0xc00010e1e0 1677662839 1677662899 1677662839 0xc0005ee120}","time":"2023-03-01T17:28:33+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T17:28:33+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:42170","time":"2023-03-01T17:28:33+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:234","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:42170","time":"2023-03-01T17:28:33+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662913750-821138\",\"cmd\":\"login\",\"data\":{\"userID\":\"庞涓\",\"appID\":0}}","time":"2023-03-01T17:28:33+08:00"}
{"addr":"[::1]:42170","data":"{\"seq\":\"1677662913750-821138\",\"cmd\":\"login\",\"data\":{\"userID\":\"庞涓\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:28:33+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyOTEzNzUwLTgyMTEzOCIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T17:28:33+08:00"}
{"Addr":"[::1]:42170","RoomID":0,"UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:260","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T17:28:33+08:00"}
{"AppId":0,"RoomID":101,"UserId":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:146","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:28:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.23 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T17:28:37+08:00"}
{"Addr":"[::1]:42170","RoomID":101,"UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:277","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T17:28:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:28:37+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662879\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"427463524","roomID":101,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:28:37+08:00","userID":"庞涓"}
{"appID":0,"data":"{\"seq\":\"427463524\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"庞涓\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":101,"time":"2023-03-01T17:28:37+08:00","userID":"庞涓"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:41","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T17:28:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T17:28:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.14 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T17:28:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.25 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T17:28:37+08:00"}
{"AppId":0,"RoomID":102,"UserId":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:146","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:28:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.17 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T17:28:38+08:00"}
{"Addr":"[::1]:42170","RoomID":102,"UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:277","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T17:28:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:28:38+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662879\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"896147619","roomID":102,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:28:38+08:00","userID":"庞涓"}
{"appID":0,"data":"{\"seq\":\"896147619\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"庞涓\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":102,"time":"2023-03-01T17:28:38+08:00","userID":"庞涓"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:41","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:102","roomID":102,"time":"2023-03-01T17:28:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":102,"time":"2023-03-01T17:28:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.28 method:GET statusCode:200 uri:/user/list?roomID=102]","time":"2023-03-01T17:28:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.51 method:GET statusCode:200 uri:/user/historyMessageList?roomID=102\u0026start=5\u0026limit=5]","time":"2023-03-01T17:28:38+08:00"}
{"AppId":0,"RoomID":103,"UserId":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:146","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:28:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.21 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T17:28:43+08:00"}
{"Addr":"[::1]:42170","RoomID":103,"UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:277","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T17:28:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:28:43+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662879\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"68418675","roomID":103,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:28:43+08:00","userID":"庞涓"}
{"appID":0,"data":"{\"seq\":\"68418675\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"庞涓\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":103,"time":"2023-03-01T17:28:43+08:00","userID":"庞涓"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:41","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:103","roomID":103,"time":"2023-03-01T17:28:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":103,"time":"2023-03-01T17:28:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.55 method:GET statusCode:200 uri:/user/historyMessageList?roomID=103\u0026start=10\u0026limit=5]","time":"2023-03-01T17:28:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.6 method:GET statusCode:200 uri:/user/list?roomID=103]","time":"2023-03-01T17:28:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662932395-778910\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:28:52+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677662932395-778910\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:28:52+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:28:52+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662902,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:28:52+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyOTMyMzk1LTc3ODkxMCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:28:52+08:00"}
{"currentTime":1677662939,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:28:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:29:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662943766-980507\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:29:03+08:00"}
{"addr":"[::1]:42170","data":"{\"seq\":\"1677662943766-980507\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:29:03+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:29:03+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662913,"IsLogoff":false,"LoginTime":1677662913,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:29:03+08:00","userKey":"0_庞涓"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyOTQzNzY2LTk4MDUwNyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:29:03+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662962399-843564\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:29:22+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677662962399-843564\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:29:22+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:29:22+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662932,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:29:22+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyOTYyMzk5LTg0MzU2NCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:29:22+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-01T17:29:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.87 method:GET statusCode:200 uri:/home/index]","time":"2023-03-01T17:29:26+08:00"}
{"Addr":"[::1]:42170","err":"websocket: close 1001 (going away)","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:66","func":"bychat/internal/servers/websocket.(*Client).read","level":"error","msg":"读取客户端数据 错误","time":"2023-03-01T17:29:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:56","func":"bychat/internal/servers/websocket.(*Client).read.func2","level":"info","msg":"读取客户端数据 关闭send\u0026{0 [::1]:42170 0xc000592000 0xc00010e5a0 1677662913 1677662943 1677662913 0xc000198ab0}","time":"2023-03-01T17:29:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.50]referer:[]","time":"2023-03-01T17:29:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:35000","time":"2023-03-01T17:29:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:234","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:[::1]:35000","time":"2023-03-01T17:29:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662966148-665808\",\"cmd\":\"login\",\"data\":{\"userID\":\"杨素\",\"appID\":0}}","time":"2023-03-01T17:29:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677662966148-665808\",\"cmd\":\"login\",\"data\":{\"userID\":\"杨素\",\"appID\":0}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:29:26+08:00"}
{"cmd":"login","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyOTY2MTQ4LTY2NTgwOCIsImNtZCI6ImxvZ2luIiwicmVzcG9uc2UiOnsiY29kZSI6MCwiY29kZU1zZyI6IlN1Y2Nlc3MiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-01T17:29:26+08:00"}
{"Addr":"[::1]:35000","RoomID":0,"UserID":"杨素","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:260","func":"bychat/internal/servers/websocket.(*ClientManager).EventLogin","level":"info","msg":"EventLogin 用户登录成功","time":"2023-03-01T17:29:26+08:00"}
{"AppId":0,"UserId":"杨素","client":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:160","func":"bychat/internal/servers/websocket.ExitRoom","level":"info","msg":"webSocket_request 离开房间接口","time":"2023-03-01T17:29:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.47 method:POST statusCode:200 uri:/user/exit]","time":"2023-03-01T17:29:27+08:00"}
{"Addr":"[::1]:35000","RoomID":0,"UserID":"杨素","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:296","func":"bychat/internal/servers/websocket.(*ClientManager).EventExitRoom","level":"info","msg":"EventEnterRoom 用户离开房间","time":"2023-03-01T17:29:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:29:27+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662939\"]"}
{"appID":0,"cmd":"exit","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"用户已经离开~","msg":"SendUserMessageAll","msgID":"919476576","roomID":0,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:29:27+08:00","userID":"杨素"}
{"AppId":0,"RoomID":101,"UserId":"杨素","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:146","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:29:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.12 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T17:29:27+08:00"}
{"appID":0,"data":"{\"seq\":\"919476576\",\"cmd\":\"exit\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"用户已经离开~\",\"from\":\"杨素\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":0,"time":"2023-03-01T17:29:27+08:00","userID":"杨素"}
{"Addr":"[::1]:35000","RoomID":0,"UserID":"杨素","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:277","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T17:29:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:29:27+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662939\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"921507519","roomID":0,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:29:27+08:00","userID":"杨素"}
{"appID":0,"data":"{\"seq\":\"921507519\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"杨素\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":0,"time":"2023-03-01T17:29:27+08:00","userID":"杨素"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:41","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:101","roomID":101,"time":"2023-03-01T17:29:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":101,"time":"2023-03-01T17:29:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.18 method:GET statusCode:200 uri:/user/list?roomID=101]","time":"2023-03-01T17:29:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.35 method:GET statusCode:200 uri:/user/historyMessageList?roomID=101\u0026start=0\u0026limit=5]","time":"2023-03-01T17:29:27+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:29:30+08:00"}
{"AppId":0,"UserId":"杨素","client":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:160","func":"bychat/internal/servers/websocket.ExitRoom","level":"info","msg":"webSocket_request 离开房间接口","time":"2023-03-01T17:29:31+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.25 method:POST statusCode:200 uri:/user/exit]","time":"2023-03-01T17:29:31+08:00"}
{"Addr":"[::1]:35000","RoomID":0,"UserID":"杨素","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:296","func":"bychat/internal/servers/websocket.(*ClientManager).EventExitRoom","level":"info","msg":"EventEnterRoom 用户离开房间","time":"2023-03-01T17:29:31+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:29:31+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662939\"]"}
{"appID":0,"cmd":"exit","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"用户已经离开~","msg":"SendUserMessageAll","msgID":"573581964","roomID":0,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:29:31+08:00","userID":"杨素"}
{"appID":0,"data":"{\"seq\":\"573581964\",\"cmd\":\"exit\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"用户已经离开~\",\"from\":\"杨素\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":0,"time":"2023-03-01T17:29:31+08:00","userID":"杨素"}
{"AppId":0,"RoomID":102,"UserId":"杨素","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:146","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:29:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.15 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T17:29:36+08:00"}
{"Addr":"[::1]:35000","RoomID":102,"UserID":"杨素","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:277","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T17:29:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:148","func":"bychat/api/v1/user.ExitRoom","level":"error","msg":"EnterRoom Param FailedKey: 'Param.RoomID' Error:Field validation for 'RoomID' failed on the 'required' tag","time":"2023-03-01T17:29:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:29:36+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662939\"]"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.5 method:POST statusCode:400 uri:/user/exit]","time":"2023-03-01T17:29:36+08:00"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"248108391","roomID":102,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:29:36+08:00","userID":"杨素"}
{"appID":0,"data":"{\"seq\":\"248108391\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"杨素\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":102,"time":"2023-03-01T17:29:36+08:00","userID":"杨素"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:41","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:102","roomID":102,"time":"2023-03-01T17:29:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":102,"time":"2023-03-01T17:29:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.26 method:GET statusCode:200 uri:/user/list?roomID=102]","time":"2023-03-01T17:29:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.4 method:GET statusCode:200 uri:/user/historyMessageList?roomID=102\u0026start=5\u0026limit=5]","time":"2023-03-01T17:29:36+08:00"}
{"AppId":0,"RoomID":103,"UserId":"杨素","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:146","func":"bychat/internal/servers/websocket.EnterRoom","level":"info","msg":"webSocket_request 进入房间接口","time":"2023-03-01T17:29:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.28 method:POST statusCode:200 uri:/user/enter]","time":"2023-03-01T17:29:38+08:00"}
{"Addr":"[::1]:35000","RoomID":103,"UserID":"杨素","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:277","func":"bychat/internal/servers/websocket.(*ClientManager).EventEnterRoom","level":"info","msg":"EventEnterRoom 用户进入房间","time":"2023-03-01T17:29:38+08:00"}
{"AppId":0,"UserId":"杨素","client":103,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:160","func":"bychat/internal/servers/websocket.ExitRoom","level":"info","msg":"webSocket_request 离开房间接口","time":"2023-03-01T17:29:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.58 method:POST statusCode:200 uri:/user/exit]","time":"2023-03-01T17:29:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:29:38+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662939\"]"}
{"appID":0,"cmd":"enter","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"哈喽~","msg":"SendUserMessageAll","msgID":"543147776","roomID":103,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:29:38+08:00","userID":"杨素"}
{"appID":0,"data":"{\"seq\":\"543147776\",\"cmd\":\"enter\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"哈喽~\",\"from\":\"杨素\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":103,"time":"2023-03-01T17:29:38+08:00","userID":"杨素"}
{"Addr":"[::1]:35000","RoomID":103,"UserID":"杨素","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:296","func":"bychat/internal/servers/websocket.(*ClientManager).EventExitRoom","level":"info","msg":"EventEnterRoom 用户离开房间","time":"2023-03-01T17:29:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/cache/server_cache.go:88","func":"bychat/lib/cache.GetServerNodeAll","key":"acc:hash:server:nodes","level":"info","msg":"GetServerNodeAll","time":"2023-03-01T17:29:38+08:00","valByte":"[\"172.30.33.105:9001\",\"1677662939\"]"}
{"appID":0,"cmd":"exit","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:106","func":"bychat/internal/servers/websocket.SendUserMessageAll","level":"info","message":"用户已经离开~","msg":"SendUserMessageAll","msgID":"544615722","roomID":103,"servers":[{"ip":"172.30.33.105","port":"9001"}],"time":"2023-03-01T17:29:38+08:00","userID":"杨素"}
{"appID":0,"data":"{\"seq\":\"544615722\",\"cmd\":\"exit\",\"response\":{\"code\":0,\"codeMsg\":\"Ok\",\"data\":{\"to\":\"\",\"type\":\"text\",\"msg\":\"用户已经离开~\",\"from\":\"杨素\"}}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:127","func":"bychat/internal/servers/websocket.AllSendMessages","level":"info","msg":"全员广播","roomID":103,"time":"2023-03-01T17:29:38+08:00","userID":"杨素"}
{"appID":0,"file":"/home/ydlro/go_project/bychat/api/v1/user/user.go:41","func":"bychat/api/v1/user.GetRoomUserList","level":"info","msg":"http_request 查看全部在线用户 roomID:103","roomID":103,"time":"2023-03-01T17:29:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:17","func":"bychat/internal/servers/websocket.GetRoomUserList","level":"info","msg":"获取全部用户","roomID":103,"time":"2023-03-01T17:29:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.15 method:GET statusCode:200 uri:/user/list?roomID=103]","time":"2023-03-01T17:29:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.23 method:GET statusCode:200 uri:/user/historyMessageList?roomID=103\u0026start=10\u0026limit=5]","time":"2023-03-01T17:29:38+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662992387-310574\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:29:52+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677662992387-310574\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:29:52+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:29:52+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662962,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:29:52+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyOTkyMzg3LTMxMDU3NCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:29:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677662996152-863306\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:29:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677662996152-863306\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:29:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:29:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662966,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:29:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYyOTk2MTUyLTg2MzMwNiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:29:56+08:00"}
{"currentTime":1677662999,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:29:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:30:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663022392-320016\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:30:22+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663022392-320016\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:30:22+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:30:22+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662992,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:30:22+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMDIyMzkyLTMyMDAxNiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:30:22+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663026153-157574\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:30:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663026153-157574\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:30:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:30:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677662996,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:30:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMDI2MTUzLTE1NzU3NCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:30:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:30:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663052398-636043\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:30:52+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663052398-636043\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:30:52+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:30:52+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663022,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:30:52+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMDUyMzk4LTYzNjA0MyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:30:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663056159-345969\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:30:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663056159-345969\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:30:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:30:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663026,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:30:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMDU2MTU5LTM0NTk2OSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:30:56+08:00"}
{"currentTime":1677663059,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:30:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:31:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663082390-471404\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:31:22+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663082390-471404\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:31:22+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:31:22+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663052,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:31:22+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMDgyMzkwLTQ3MTQwNCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:31:22+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663086158-109275\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:31:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663086158-109275\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:31:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:31:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663056,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:31:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMDg2MTU4LTEwOTI3NSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:31:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:31:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663112392-739185\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:31:52+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663112392-739185\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:31:52+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:31:52+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663082,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:31:52+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMTEyMzkyLTczOTE4NSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:31:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663116161-664266\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:31:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663116161-664266\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:31:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:31:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663086,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:31:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMTE2MTYxLTY2NDI2NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:31:56+08:00"}
{"currentTime":1677663119,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:31:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:32:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663142385-218748\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:32:22+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663142385-218748\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:32:22+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:32:22+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663112,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:32:22+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMTQyMzg1LTIxODc0OCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:32:22+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663146162-667502\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:32:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663146162-667502\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:32:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:32:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663116,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:32:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMTQ2MTYyLTY2NzUwMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:32:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:32:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663176154-717901\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:32:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663176154-717901\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:32:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:32:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663146,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:32:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMTc2MTU0LTcxNzkwMSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:32:56+08:00"}
{"currentTime":1677663179,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:32:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:33:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:33:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663181404-405623\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:33:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663181404-405623\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:33:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:33:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663142,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:33:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMTgxNDA0LTQwNTYyMyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:33:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663206158-563711\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:33:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663206158-563711\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:33:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:33:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663176,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:33:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMjA2MTU4LTU2MzcxMSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:33:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:33:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:33:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663236151-436385\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:33:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663236151-436385\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:33:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:33:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663206,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:33:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMjM2MTUxLTQzNjM4NSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:33:56+08:00"}
{"currentTime":1677663239,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:33:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:34:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:34:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663241392-823640\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:34:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663241392-823640\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:34:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:34:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663181,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:34:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMjQxMzkyLTgyMzY0MCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:34:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663266156-338607\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:34:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663266156-338607\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:34:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:34:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663236,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:34:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMjY2MTU2LTMzODYwNyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:34:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:34:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:34:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:34:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663296158-876073\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:34:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663296158-876073\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:34:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:34:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663266,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:34:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMjk2MTU4LTg3NjA3MyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:34:56+08:00"}
{"currentTime":1677663299,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:34:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:35:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:35:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:35:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663301398-344429\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:35:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663301398-344429\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:35:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:35:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663241,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:35:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMzAxMzk4LTM0NDQyOSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:35:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663326161-317536\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:35:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663326161-317536\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:35:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:35:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663296,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:35:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMzI2MTYxLTMxNzUzNiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:35:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:35:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:35:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:35:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:35:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663356162-823399\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:35:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663356162-823399\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:35:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:35:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663326,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:35:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMzU2MTYyLTgyMzM5OSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:35:56+08:00"}
{"currentTime":1677663359,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:35:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:36:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:36:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:36:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:36:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663361393-174552\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:36:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663361393-174552\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:36:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:36:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663301,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:36:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMzYxMzkzLTE3NDU1MiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:36:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663386163-359228\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:36:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663386163-359228\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:36:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:36:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663356,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:36:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzMzg2MTYzLTM1OTIyOCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:36:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:36:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:36:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:36:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:36:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663416159-110319\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:36:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663416159-110319\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:36:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:36:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663386,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:36:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNDE2MTU5LTExMDMxOSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:36:56+08:00"}
{"currentTime":1677663419,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:36:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:37:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:37:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:37:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:37:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663421392-327032\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:37:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663421392-327032\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:37:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:37:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663361,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:37:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNDIxMzkyLTMyNzAzMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:37:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663446160-962281\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:37:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663446160-962281\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:37:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:37:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663416,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:37:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNDQ2MTYwLTk2MjI4MSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:37:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:37:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:37:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:37:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:37:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663476147-159468\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:37:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663476147-159468\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:37:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:37:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663446,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:37:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNDc2MTQ3LTE1OTQ2OCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:37:56+08:00"}
{"currentTime":1677663479,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:37:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:38:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:38:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:38:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:38:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663481400-211791\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:38:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663481400-211791\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:38:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:38:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663421,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:38:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNDgxNDAwLTIxMTc5MSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:38:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663506159-839276\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:38:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663506159-839276\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:38:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:38:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663476,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:38:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNTA2MTU5LTgzOTI3NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:38:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:38:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:38:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:38:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:38:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663536152-514882\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:38:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663536152-514882\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:38:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:38:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663506,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:38:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNTM2MTUyLTUxNDg4MiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:38:56+08:00"}
{"currentTime":1677663539,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:38:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:39:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:39:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:39:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:39:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663541390-926977\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:39:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663541390-926977\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:39:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:39:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663481,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:39:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNTQxMzkwLTkyNjk3NyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:39:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663566155-614297\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:39:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663566155-614297\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:39:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:39:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663536,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:39:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNTY2MTU1LTYxNDI5NyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:39:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:39:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:39:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:39:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:39:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663596159-828022\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:39:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663596159-828022\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:39:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:39:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663566,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:39:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNTk2MTU5LTgyODAyMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:39:56+08:00"}
{"currentTime":1677663599,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:39:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:40:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:40:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:40:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:40:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663601407-835831\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:40:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663601407-835831\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:40:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:40:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663541,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:40:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNjAxNDA3LTgzNTgzMSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:40:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663626163-245885\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:40:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663626163-245885\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:40:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:40:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663596,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:40:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNjI2MTYzLTI0NTg4NSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:40:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:40:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:40:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:40:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:40:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663656150-135757\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:40:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663656150-135757\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:40:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:40:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663626,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:40:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNjU2MTUwLTEzNTc1NyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:40:56+08:00"}
{"currentTime":1677663659,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:40:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:41:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:41:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:41:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:41:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663661384-685720\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:41:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663661384-685720\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:41:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:41:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663601,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:41:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNjYxMzg0LTY4NTcyMCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:41:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663686153-877040\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:41:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663686153-877040\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:41:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:41:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663656,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:41:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNjg2MTUzLTg3NzA0MCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:41:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:41:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:41:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:41:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:41:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663716155-914767\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:41:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663716155-914767\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:41:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:41:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663686,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:41:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNzE2MTU1LTkxNDc2NyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:41:56+08:00"}
{"currentTime":1677663719,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:41:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:42:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:42:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:42:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:42:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663721386-982690\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:42:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663721386-982690\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:42:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:42:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663661,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:42:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNzIxMzg2LTk4MjY5MCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:42:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663746160-619697\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:42:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663746160-619697\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:42:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:42:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663716,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:42:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNzQ2MTYwLTYxOTY5NyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:42:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:42:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:42:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:42:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:42:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663776162-212396\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:42:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663776162-212396\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:42:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:42:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663746,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:42:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNzc2MTYyLTIxMjM5NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:42:56+08:00"}
{"currentTime":1677663779,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:42:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:43:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:43:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:43:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:43:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663781384-422517\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:43:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663781384-422517\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:43:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:43:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663721,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:43:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzNzgxMzg0LTQyMjUxNyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:43:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663806159-623033\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:43:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663806159-623033\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:43:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:43:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663776,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:43:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzODA2MTU5LTYyMzAzMyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:43:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:43:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:43:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:43:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:43:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663836155-968978\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:43:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663836155-968978\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:43:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:43:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663806,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:43:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzODM2MTU1LTk2ODk3OCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:43:56+08:00"}
{"currentTime":1677663839,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:43:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:44:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:44:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:44:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:44:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663841383-577991\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:44:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663841383-577991\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:44:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:44:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663781,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:44:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzODQxMzgzLTU3Nzk5MSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:44:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663866150-194135\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:44:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663866150-194135\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:44:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:44:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663836,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:44:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzODY2MTUwLTE5NDEzNSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:44:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:44:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:44:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:44:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:44:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663896157-858802\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:44:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663896157-858802\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:44:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:44:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663866,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:44:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzODk2MTU3LTg1ODgwMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:44:56+08:00"}
{"currentTime":1677663899,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:44:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:45:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:45:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:45:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:45:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663901398-621183\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:45:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663901398-621183\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:45:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:45:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663841,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:45:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzOTAxMzk4LTYyMTE4MyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:45:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663926160-654930\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:45:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663926160-654930\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:45:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:45:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663896,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:45:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzOTI2MTYwLTY1NDkzMCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:45:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:45:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:45:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:45:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:45:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663956153-470242\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:45:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663956153-470242\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:45:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:45:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663926,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:45:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzOTU2MTUzLTQ3MDI0MiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:45:56+08:00"}
{"currentTime":1677663959,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:45:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:46:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:46:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:46:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:46:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663961383-142136\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:46:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677663961383-142136\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:46:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:46:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663901,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:46:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzOTYxMzgzLTE0MjEzNiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:46:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677663986164-411051\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:46:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677663986164-411051\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:46:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:46:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663956,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:46:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjYzOTg2MTY0LTQxMTA1MSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:46:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:46:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:46:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:46:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:46:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664016154-604581\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:46:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677664016154-604581\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:46:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:46:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663986,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:46:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MDE2MTU0LTYwNDU4MSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:46:56+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/systems/system.go:17","func":"bychat/api/v1/systems.Status","level":"info","msg":"http_request 查询系统状态","time":"2023-03-01T17:46:58+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.17 method:GET statusCode:200 uri:/system/state]","time":"2023-03-01T17:46:58+08:00"}
{"currentTime":1677664019,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:46:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:47:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:47:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:47:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:47:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664021402-412545\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:47:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677664021402-412545\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:47:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:47:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677663961,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:47:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MDIxNDAyLTQxMjU0NSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:47:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664046384-519902\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:47:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677664046384-519902\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:47:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:47:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664016,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:47:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MDQ2Mzg0LTUxOTkwMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:47:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:47:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:47:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:47:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:47:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664076397-636533\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:47:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677664076397-636533\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:47:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:47:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664046,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:47:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MDc2Mzk3LTYzNjUzMyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:47:56+08:00"}
{"currentTime":1677664079,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:47:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:48:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:48:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:48:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:48:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664081396-223179\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:48:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677664081396-223179\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:48:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:48:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664021,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:48:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MDgxMzk2LTIyMzE3OSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:48:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664106396-172979\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:48:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677664106396-172979\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:48:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:48:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664076,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:48:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MTA2Mzk2LTE3Mjk3OSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:48:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:48:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:48:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:48:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:48:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664136398-890701\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:48:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677664136398-890701\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:48:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:48:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664106,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:48:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MTM2Mzk4LTg5MDcwMSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:48:56+08:00"}
{"currentTime":1677664139,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:48:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:49:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:49:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:49:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:49:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664141384-191687\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:49:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677664141384-191687\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:49:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:49:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664081,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:49:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MTQxMzg0LTE5MTY4NyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:49:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/systems/system.go:17","func":"bychat/api/v1/systems.Status","level":"info","msg":"http_request 查询系统状态","time":"2023-03-01T17:49:11+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.14 method:GET statusCode:200 uri:/system/state]","time":"2023-03-01T17:49:11+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664166386-987453\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:49:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677664166386-987453\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:49:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:49:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664136,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:49:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MTY2Mzg2LTk4NzQ1MyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:49:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:49:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:49:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:49:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:49:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/systems/system.go:17","func":"bychat/api/v1/systems.Status","level":"info","msg":"http_request 查询系统状态","time":"2023-03-01T17:49:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/main.go:58","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.17 method:GET statusCode:200 uri:/system/state]","time":"2023-03-01T17:49:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664196397-790403\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:49:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677664196397-790403\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:49:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:49:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664166,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:49:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MTk2Mzk3LTc5MDQwMyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:49:56+08:00"}
{"currentTime":1677664199,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:49:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:50:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:50:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:50:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:50:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664201398-505873\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:50:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677664201398-505873\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:50:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:50:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664141,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:50:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MjAxMzk4LTUwNTg3MyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:50:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664226385-289276\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:50:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677664226385-289276\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:50:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:50:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664196,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:50:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MjI2Mzg1LTI4OTI3NiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:50:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:50:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:50:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:50:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:50:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664256396-767469\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:50:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677664256396-767469\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:50:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:50:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664226,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:50:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MjU2Mzk2LTc2NzQ2OSIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:50:56+08:00"}
{"currentTime":1677664259,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:50:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:51:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:51:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:51:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:51:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664261384-956230\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:51:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677664261384-956230\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:51:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:51:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664201,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:51:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MjYxMzg0LTk1NjIzMCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:51:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664286385-401772\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:51:26+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677664286385-401772\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:51:26+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:51:26+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664256,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:51:26+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0Mjg2Mzg1LTQwMTc3MiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:51:26+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:51:30+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:51:30+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:51:30+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:51:30+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664316405-924344\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:51:56+08:00"}
{"addr":"[::1]:35000","data":"{\"seq\":\"1677664316405-924344\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:51:56+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:51:56+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664286,"IsLogoff":false,"LoginTime":1677662966,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:51:56+08:00","userKey":"0_杨素"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MzE2NDA1LTkyNDM0NCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:51:56+08:00"}
{"currentTime":1677664319,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.33.105","port":"9001"},"time":"2023-03-01T17:51:59+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-01T17:52:00+08:00"}
{"client.Addr":"[::1]:40912","client.HeartbeatTime":1677662819,"client.LoginTime":1677662819,"client.UserID":"贾谊","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:52:00+08:00"}
{"client.Addr":"[::1]:52802","client.HeartbeatTime":1677662899,"client.LoginTime":1677662839,"client.UserID":"荣旗","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:52:00+08:00"}
{"client.Addr":"[::1]:42170","client.HeartbeatTime":1677662943,"client.LoginTime":1677662913,"client.UserID":"庞涓","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:414","func":"bychat/internal/servers/websocket.ClearTimeoutConnections","level":"info","msg":"心跳时间超时 关闭连接","time":"2023-03-01T17:52:00+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:71","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677664321399-898187\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-01T17:52:01+08:00"}
{"addr":"[::1]:52808","data":"{\"seq\":\"1677664321399-898187\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-01T17:52:01+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:59","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-01T17:52:01+08:00"}
{"AccIp":"172.30.33.105","HeartbeatTime":1677664261,"IsLogoff":false,"LoginTime":1677662841,"file":"/home/ydlro/go_project/bychat/lib/cache/user_cache.go:68","func":"bychat/lib/cache.GetUserOnlineInfo","level":"info","msg":"获取用户在线数据","time":"2023-03-01T17:52:01+08:00","userKey":"0_韩王韩信"}
{"cmd":"heartbeat","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3NjY0MzIxMzk5LTg5ODE4NyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjAsImNvZGVNc2ciOiJTdWNjZXNzIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-01T17:52:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:33","func":"bychat/lib/redislib.ExampleNewClient","level":"panic","msg":"dial tcp 127.0.0.1:6379: connect: connection refused","time":"2023-03-03T13:35:03+08:00"}
{"file":"/home/ydlro/go_project/bychat/lib/redislib/redis_lib.go:33","func":"bychat/lib/redislib.ExampleNewClient","level":"panic","msg":"dial tcp 127.0.0.1:6379: connect: connection refused","time":"2023-03-03T17:45:42+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.41.217:9001","time":"2023-03-03T17:46:29+08:00"}
{"currentTime":1677836791,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.41.217","port":"9001"},"time":"2023-03-03T17:46:31+08:00"}
{"debug.Stack":"goroutine 27 [running]:\nruntime/debug.Stack()\n\t/home/ydlro/go/go1.19/src/runtime/debug/stack.go:24 +0x65\nbychat/internal/servers/task.serverNode.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:25 +0xdc\npanic({0x9800a0, 0xe59050})\n\t/home/ydlro/go/go1.19/src/runtime/panic.go:884 +0x212\nbychat/lib/cache.SetServerNodeInfo(0xc000116120, 0xc000000004?)\n\t/home/ydlro/go_project/bychat/lib/cache/server_cache.go:31 +0x27b\nbychat/internal/servers/task.serverNode({0x958080?, 0xaf7760})\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:39 +0x31a\nbychat/internal/servers/task.Timer.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:28 +0x12b\ncreated by bychat/internal/servers/task.Timer\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:10 +0x109\n","file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:26","func":"bychat/internal/servers/task.serverNode.func1","level":"info","msg":"服务注册 stop","r":"runtime error: invalid memory address or nil pointer dereference","time":"2023-03-03T17:46:31+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-03T17:46:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-03T17:46:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.35 method:GET statusCode:200 uri:/home/index]","time":"2023-03-03T17:46:36+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0 method:GET statusCode:404 uri:/favicon.ico]","time":"2023-03-03T17:46:37+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-03T17:46:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.02 method:GET statusCode:200 uri:/home/index]","time":"2023-03-03T17:46:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-03T17:47:02+08:00"}
{"currentTime":1677836851,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.41.217","port":"9001"},"time":"2023-03-03T17:47:31+08:00"}
{"debug.Stack":"goroutine 27 [running]:\nruntime/debug.Stack()\n\t/home/ydlro/go/go1.19/src/runtime/debug/stack.go:24 +0x65\nbychat/internal/servers/task.serverNode.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:25 +0xdc\npanic({0x9800a0, 0xe59050})\n\t/home/ydlro/go/go1.19/src/runtime/panic.go:884 +0x212\nbychat/lib/cache.SetServerNodeInfo(0xc0001161a0, 0xc000000004?)\n\t/home/ydlro/go_project/bychat/lib/cache/server_cache.go:31 +0x27b\nbychat/internal/servers/task.serverNode({0x958080?, 0xaf7760})\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:39 +0x31a\nbychat/internal/servers/task.Timer.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:28 +0x12b\ncreated by bychat/internal/servers/task.Timer\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:10 +0x109\n","file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:26","func":"bychat/internal/servers/task.serverNode.func1","level":"info","msg":"服务注册 stop","r":"runtime error: invalid memory address or nil pointer dereference","time":"2023-03-03T17:47:31+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-03T17:47:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-03T17:48:02+08:00"}
{"currentTime":1677836911,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.41.217","port":"9001"},"time":"2023-03-03T17:48:31+08:00"}
{"debug.Stack":"goroutine 27 [running]:\nruntime/debug.Stack()\n\t/home/ydlro/go/go1.19/src/runtime/debug/stack.go:24 +0x65\nbychat/internal/servers/task.serverNode.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:25 +0xdc\npanic({0x9800a0, 0xe59050})\n\t/home/ydlro/go/go1.19/src/runtime/panic.go:884 +0x212\nbychat/lib/cache.SetServerNodeInfo(0xc0001161c0, 0xc000000004?)\n\t/home/ydlro/go_project/bychat/lib/cache/server_cache.go:31 +0x27b\nbychat/internal/servers/task.serverNode({0x958080?, 0xaf7760})\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:39 +0x31a\nbychat/internal/servers/task.Timer.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:28 +0x12b\ncreated by bychat/internal/servers/task.Timer\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:10 +0x109\n","file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:26","func":"bychat/internal/servers/task.serverNode.func1","level":"info","msg":"服务注册 stop","r":"runtime error: invalid memory address or nil pointer dereference","time":"2023-03-03T17:48:31+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-03T17:48:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-03T17:49:02+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-03T17:49:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:2.06 method:GET statusCode:200 uri:/home/index]","time":"2023-03-03T17:49:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.03 method:POST statusCode:404 uri:/user/login]","time":"2023-03-03T17:49:08+08:00"}
{"currentTime":1677836971,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.41.217","port":"9001"},"time":"2023-03-03T17:49:31+08:00"}
{"debug.Stack":"goroutine 27 [running]:\nruntime/debug.Stack()\n\t/home/ydlro/go/go1.19/src/runtime/debug/stack.go:24 +0x65\nbychat/internal/servers/task.serverNode.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:25 +0xdc\npanic({0x9800a0, 0xe59050})\n\t/home/ydlro/go/go1.19/src/runtime/panic.go:884 +0x212\nbychat/lib/cache.SetServerNodeInfo(0xc000116160, 0xc000000004?)\n\t/home/ydlro/go_project/bychat/lib/cache/server_cache.go:31 +0x27b\nbychat/internal/servers/task.serverNode({0x958080?, 0xaf7760})\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:39 +0x31a\nbychat/internal/servers/task.Timer.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:28 +0x12b\ncreated by bychat/internal/servers/task.Timer\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:10 +0x109\n","file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:26","func":"bychat/internal/servers/task.serverNode.func1","level":"info","msg":"服务注册 stop","r":"runtime error: invalid memory address or nil pointer dereference","time":"2023-03-03T17:49:31+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-03T17:49:32+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.41.217:9001","time":"2023-03-03T17:49:41+08:00"}
{"currentTime":1677836983,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.41.217","port":"9001"},"time":"2023-03-03T17:49:43+08:00"}
{"debug.Stack":"goroutine 13 [running]:\nruntime/debug.Stack()\n\t/home/ydlro/go/go1.19/src/runtime/debug/stack.go:24 +0x65\nbychat/internal/servers/task.serverNode.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:25 +0xdc\npanic({0x981220, 0xe5b050})\n\t/home/ydlro/go/go1.19/src/runtime/panic.go:884 +0x212\nbychat/lib/cache.SetServerNodeInfo(0xc0004181e0, 0xc000000004?)\n\t/home/ydlro/go_project/bychat/lib/cache/server_cache.go:31 +0x27b\nbychat/internal/servers/task.serverNode({0x959140?, 0xaf8c10})\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:39 +0x31a\nbychat/internal/servers/task.Timer.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:28 +0x12b\ncreated by bychat/internal/servers/task.Timer\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:10 +0x109\n","file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:26","func":"bychat/internal/servers/task.serverNode.func1","level":"info","msg":"服务注册 stop","r":"runtime error: invalid memory address or nil pointer dereference","time":"2023-03-03T17:49:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-03T17:49:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.14 method:GET statusCode:200 uri:/home/index]","time":"2023-03-03T17:49:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-03T17:49:44+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.07 method:POST statusCode:404 uri:/user/login]","time":"2023-03-03T17:49:46+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.41.217:9001","time":"2023-03-03T17:50:03+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-03T17:50:04+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.46 method:GET statusCode:200 uri:/home/index]","time":"2023-03-03T17:50:04+08:00"}
{"currentTime":1677837005,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.41.217","port":"9001"},"time":"2023-03-03T17:50:05+08:00"}
{"debug.Stack":"goroutine 29 [running]:\nruntime/debug.Stack()\n\t/home/ydlro/go/go1.19/src/runtime/debug/stack.go:24 +0x65\nbychat/internal/servers/task.serverNode.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:25 +0xdc\npanic({0x981220, 0xe5b050})\n\t/home/ydlro/go/go1.19/src/runtime/panic.go:884 +0x212\nbychat/lib/cache.SetServerNodeInfo(0xc0004900c0, 0xc000000004?)\n\t/home/ydlro/go_project/bychat/lib/cache/server_cache.go:31 +0x27b\nbychat/internal/servers/task.serverNode({0x959140?, 0xaf8c10})\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:39 +0x31a\nbychat/internal/servers/task.Timer.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:28 +0x12b\ncreated by bychat/internal/servers/task.Timer\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:10 +0x109\n","file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:26","func":"bychat/internal/servers/task.serverNode.func1","level":"info","msg":"服务注册 stop","r":"runtime error: invalid memory address or nil pointer dereference","time":"2023-03-03T17:50:05+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-03T17:50:06+08:00"}
{"AppId":0,"UserId":"9","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:171","func":"bychat/internal/servers/websocket.Login","level":"info","msg":"webSocket_request 登录","time":"2023-03-03T17:50:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.34 method:POST statusCode:200 uri:/user/login]","time":"2023-03-03T17:50:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.57]referer:[]","time":"2023-03-03T17:50:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:57794","time":"2023-03-03T17:50:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:227","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:","time":"2023-03-03T17:50:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-03T17:50:36+08:00"}
{"currentTime":1677837065,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.41.217","port":"9001"},"time":"2023-03-03T17:51:05+08:00"}
{"debug.Stack":"goroutine 29 [running]:\nruntime/debug.Stack()\n\t/home/ydlro/go/go1.19/src/runtime/debug/stack.go:24 +0x65\nbychat/internal/servers/task.serverNode.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:25 +0xdc\npanic({0x981220, 0xe5b050})\n\t/home/ydlro/go/go1.19/src/runtime/panic.go:884 +0x212\nbychat/lib/cache.SetServerNodeInfo(0xc0003fa460, 0xc000000004?)\n\t/home/ydlro/go_project/bychat/lib/cache/server_cache.go:31 +0x27b\nbychat/internal/servers/task.serverNode({0x959140?, 0xaf8c10})\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:39 +0x31a\nbychat/internal/servers/task.Timer.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:28 +0x12b\ncreated by bychat/internal/servers/task.Timer\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:10 +0x109\n","file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:26","func":"bychat/internal/servers/task.serverNode.func1","level":"info","msg":"服务注册 stop","r":"runtime error: invalid memory address or nil pointer dereference","time":"2023-03-03T17:51:05+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-03T17:51:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-03T17:51:36+08:00"}
{"currentTime":1677837125,"file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:37","func":"bychat/internal/servers/task.serverNode","level":"info","msg":"定时任务，服务注册","param":"","server":{"ip":"172.30.41.217","port":"9001"},"time":"2023-03-03T17:52:05+08:00"}
{"debug.Stack":"goroutine 29 [running]:\nruntime/debug.Stack()\n\t/home/ydlro/go/go1.19/src/runtime/debug/stack.go:24 +0x65\nbychat/internal/servers/task.serverNode.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:25 +0xdc\npanic({0x981220, 0xe5b050})\n\t/home/ydlro/go/go1.19/src/runtime/panic.go:884 +0x212\nbychat/lib/cache.SetServerNodeInfo(0xc0003fa480, 0xc000000004?)\n\t/home/ydlro/go_project/bychat/lib/cache/server_cache.go:31 +0x27b\nbychat/internal/servers/task.serverNode({0x959140?, 0xaf8c10})\n\t/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:39 +0x31a\nbychat/internal/servers/task.Timer.func1()\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:28 +0x12b\ncreated by bychat/internal/servers/task.Timer\n\t/home/ydlro/go_project/bychat/internal/servers/task/task_init.go:10 +0x109\n","file":"/home/ydlro/go_project/bychat/internal/servers/task/server_node_task.go:26","func":"bychat/internal/servers/task.serverNode.func1","level":"info","msg":"服务注册 stop","r":"runtime error: invalid memory address or nil pointer dereference","time":"2023-03-03T17:52:05+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/task/clean_connection _task.go:37","func":"bychat/internal/servers/task.cleanConnection","level":"info","msg":"定时任务，清理超时连接","param":"","time":"2023-03-03T17:52:06+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.41.217:9001","time":"2023-03-03T17:52:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-03T17:52:20+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.93 method:GET statusCode:200 uri:/home/index]","time":"2023-03-03T17:52:20+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-03T17:52:45+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:2.87 method:GET statusCode:200 uri:/home/index]","time":"2023-03-03T17:52:45+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-03T17:52:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.87 method:GET statusCode:200 uri:/home/index]","time":"2023-03-03T17:52:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-03T17:52:54+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.97 method:GET statusCode:200 uri:/home/index]","time":"2023-03-03T17:52:54+08:00"}
{"AppId":0,"UserId":"336","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:171","func":"bychat/internal/servers/websocket.Login","level":"info","msg":"webSocket_request 登录","time":"2023-03-03T17:53:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.57 method:POST statusCode:200 uri:/user/login]","time":"2023-03-03T17:53:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.57]referer:[]","time":"2023-03-03T17:53:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:40258","time":"2023-03-03T17:53:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:227","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:","time":"2023-03-03T17:53:01+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.41.217:9001","time":"2023-03-03T17:54:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-03T17:54:20+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.85 method:GET statusCode:200 uri:/home/index]","time":"2023-03-03T17:54:20+08:00"}
{"AppId":0,"UserId":"425","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:171","func":"bychat/internal/servers/websocket.Login","level":"info","msg":"webSocket_request 登录","time":"2023-03-03T17:54:24+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.19 method:POST statusCode:200 uri:/user/login]","time":"2023-03-03T17:54:24+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.57]referer:[]","time":"2023-03-03T17:54:24+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:46518","time":"2023-03-03T17:54:24+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:227","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:","time":"2023-03-03T17:54:24+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.41.217:9001","time":"2023-03-03T17:54:42+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-03T17:54:43+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.62 method:GET statusCode:200 uri:/home/index]","time":"2023-03-03T17:54:43+08:00"}
{"AppId":0,"UserId":"181","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:171","func":"bychat/internal/servers/websocket.Login","level":"info","msg":"webSocket_request 登录","time":"2023-03-03T17:54:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.74 method:POST statusCode:200 uri:/user/login]","time":"2023-03-03T17:54:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.57]referer:[]","time":"2023-03-03T17:54:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:50950","time":"2023-03-03T17:54:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:227","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:","time":"2023-03-03T17:54:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:60","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677837288728-604658\",\"cmd\":\"open\",\"data\":{\"userID\":181,\"appID\":0,\"token\":1}}","time":"2023-03-03T17:54:48+08:00"}
{"addr":"","data":"{\"seq\":\"1677837288728-604658\",\"cmd\":\"open\",\"data\":{\"userID\":181,\"appID\":0,\"token\":1}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-03T17:54:48+08:00"}
{"err":"json: cannot unmarshal number into Go struct field OpenRequest.token of type string","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:22","func":"bychat/internal/servers/websocket.Open","level":"error","msg":"Heartbeat","time":"2023-03-03T17:54:48+08:00"}
{"cmd":"open","code":1001,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3ODM3Mjg4NzI4LTYwNDY1OCIsImNtZCI6Im9wZW4iLCJyZXNwb25zZSI6eyJjb2RlIjoxMDAxLCJjb2RlTXNnIjoi5Y+C5pWw5LiN5ZCI5rOVIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-03T17:54:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:60","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677837318735-349050\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-03T17:55:18+08:00"}
{"addr":"","data":"{\"seq\":\"1677837318735-349050\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-03T17:55:18+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:45","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-03T17:55:18+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:51","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"心跳接口 用户未登录","seq":"1677837318735-349050","time":"2023-03-03T17:55:18+08:00"}
{"cmd":"heartbeat","code":1000,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3ODM3MzE4NzM1LTM0OTA1MCIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjEwMDAsImNvZGVNc2ciOiLmnKrnmbvlvZUiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-03T17:55:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:60","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677837348742-714677\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-03T17:55:48+08:00"}
{"addr":"","data":"{\"seq\":\"1677837348742-714677\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-03T17:55:48+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:45","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-03T17:55:48+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:51","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"心跳接口 用户未登录","seq":"1677837348742-714677","time":"2023-03-03T17:55:48+08:00"}
{"cmd":"heartbeat","code":1000,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3ODM3MzQ4NzQyLTcxNDY3NyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjEwMDAsImNvZGVNc2ciOiLmnKrnmbvlvZUiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-03T17:55:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:60","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677837378736-794803\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-03T17:56:18+08:00"}
{"addr":"","data":"{\"seq\":\"1677837378736-794803\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-03T17:56:18+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:45","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-03T17:56:18+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:51","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"心跳接口 用户未登录","seq":"1677837378736-794803","time":"2023-03-03T17:56:18+08:00"}
{"cmd":"heartbeat","code":1000,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3ODM3Mzc4NzM2LTc5NDgwMyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjEwMDAsImNvZGVNc2ciOiLmnKrnmbvlvZUiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-03T17:56:18+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:60","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677837408733-642837\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-03T17:56:48+08:00"}
{"addr":"","data":"{\"seq\":\"1677837408733-642837\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-03T17:56:48+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:45","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-03T17:56:48+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:51","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"心跳接口 用户未登录","seq":"1677837408733-642837","time":"2023-03-03T17:56:48+08:00"}
{"cmd":"heartbeat","code":1000,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3ODM3NDA4NzMzLTY0MjgzNyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjEwMDAsImNvZGVNc2ciOiLmnKrnmbvlvZUiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-03T17:56:48+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.41.217:9001","time":"2023-03-03T18:00:22+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-03T18:00:23+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.2 method:GET statusCode:200 uri:/home/index]","time":"2023-03-03T18:00:23+08:00"}
{"AppId":0,"UserId":"64","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:171","func":"bychat/internal/servers/websocket.Login","level":"info","msg":"webSocket_request 登录","time":"2023-03-03T18:00:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.22 method:POST statusCode:200 uri:/user/login]","time":"2023-03-03T18:00:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.57]referer:[]","time":"2023-03-03T18:00:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:34670","time":"2023-03-03T18:00:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:227","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:","time":"2023-03-03T18:00:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:60","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677837625649-591382\",\"cmd\":\"open\",\"data\":{\"userID\":\"64\",\"appID\":0,\"token\":1}}","time":"2023-03-03T18:00:25+08:00"}
{"addr":"","data":"{\"seq\":\"1677837625649-591382\",\"cmd\":\"open\",\"data\":{\"userID\":\"64\",\"appID\":0,\"token\":1}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-03T18:00:25+08:00"}
{"err":"json: cannot unmarshal number into Go struct field OpenRequest.token of type string","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:22","func":"bychat/internal/servers/websocket.Open","level":"error","msg":"Open","time":"2023-03-03T18:00:25+08:00"}
{"cmd":"open","code":1001,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3ODM3NjI1NjQ5LTU5MTM4MiIsImNtZCI6Im9wZW4iLCJyZXNwb25zZSI6eyJjb2RlIjoxMDAxLCJjb2RlTXNnIjoi5Y+C5pWw5LiN5ZCI5rOVIiwiZGF0YSI6bnVsbH19","level":"info","msg":"acc_response send","time":"2023-03-03T18:00:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:60","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677837655664-562532\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-03T18:00:55+08:00"}
{"addr":"","data":"{\"seq\":\"1677837655664-562532\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-03T18:00:55+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:45","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-03T18:00:55+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:51","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"心跳接口 用户未登录","seq":"1677837655664-562532","time":"2023-03-03T18:00:55+08:00"}
{"cmd":"heartbeat","code":1000,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3ODM3NjU1NjY0LTU2MjUzMiIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjEwMDAsImNvZGVNc2ciOiLmnKrnmbvlvZUiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-03T18:00:55+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:60","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677837685661-254237\",\"cmd\":\"heartbeat\",\"data\":{}}","time":"2023-03-03T18:01:25+08:00"}
{"addr":"","data":"{\"seq\":\"1677837685661-254237\",\"cmd\":\"heartbeat\",\"data\":{}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-03T18:01:25+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:45","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"webSocket_request 心跳接口","time":"2023-03-03T18:01:25+08:00"}
{"UserId":"","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/server.go:51","func":"bychat/internal/servers/websocket.Heartbeat","level":"info","msg":"心跳接口 用户未登录","seq":"1677837685661-254237","time":"2023-03-03T18:01:25+08:00"}
{"cmd":"heartbeat","code":1000,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3ODM3Njg1NjYxLTI1NDIzNyIsImNtZCI6ImhlYXJ0YmVhdCIsInJlc3BvbnNlIjp7ImNvZGUiOjEwMDAsImNvZGVNc2ciOiLmnKrnmbvlvZUiLCJkYXRhIjpudWxsfX0=","level":"info","msg":"acc_response send","time":"2023-03-03T18:01:25+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:91","func":"bychat/internal/servers/websocket.StartWebSocket","level":"info","msg":"WebSocket 启动程序成功:172.30.41.217:9001","time":"2023-03-03T18:01:51+08:00"}
{"file":"/home/ydlro/go_project/bychat/api/v1/home/home.go:22","func":"bychat/api/v1/home.Index","level":"info","msg":"http_request 聊天首页101","time":"2023-03-03T18:01:52+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:1.97 method:GET statusCode:200 uri:/home/index]","time":"2023-03-03T18:01:52+08:00"}
{"AppId":0,"UserId":"516","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/user_srv.go:171","func":"bychat/internal/servers/websocket.Login","level":"info","msg":"webSocket_request 登录","time":"2023-03-03T18:01:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/cmd/main.go:57","func":"main.LoggerToFile.func1","level":"info","msg":"map[clientIp:::1 cost:0.29 method:POST statusCode:200 uri:/user/login]","time":"2023-03-03T18:01:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:99","func":"bychat/internal/servers/websocket.wsPage.func1","level":"info","msg":"升级协议ua:[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36 Edg/110.0.1587.57]referer:[]","time":"2023-03-03T18:01:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/init_acc.go:107","func":"bychat/internal/servers/websocket.wsPage","level":"info","msg":"webSocket 建立连接:[::1]:56340","time":"2023-03-03T18:01:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:227","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:","time":"2023-03-03T18:01:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client.go:60","func":"bychat/internal/servers/websocket.(*Client).read","level":"info","msg":"读取客户端数据 处理:{\"seq\":\"1677837713909-172560\",\"cmd\":\"open\",\"data\":{\"userID\":\"516\",\"appID\":0,\"token\":\"1677837713\"}}","time":"2023-03-03T18:01:53+08:00"}
{"addr":"","data":"{\"seq\":\"1677837713909-172560\",\"cmd\":\"open\",\"data\":{\"userID\":\"516\",\"appID\":0,\"token\":\"1677837713\"}}","file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:42","func":"bychat/internal/servers/websocket.ProcessData","level":"info","msg":"ProcessData Request","time":"2023-03-03T18:01:53+08:00"}
{"cmd":"open","code":0,"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/acc_process.go:92","func":"bychat/internal/servers/websocket.ProcessData","headByte":"eyJzZXEiOiIxNjc3ODM3NzEzOTA5LTE3MjU2MCIsImNtZCI6Im9wZW4iLCJyZXNwb25zZSI6eyJjb2RlIjowLCJjb2RlTXNnIjoiU3VjY2VzcyIsImRhdGEiOm51bGx9fQ==","level":"info","msg":"acc_response send","time":"2023-03-03T18:01:53+08:00"}
{"file":"/home/ydlro/go_project/bychat/internal/servers/websocket/client_manager.go:227","func":"bychat/internal/servers/websocket.(*ClientManager).EventRegister","level":"info","msg":"EventRegister 用户建立连接:","time":"2023-03-03T18:01:53+08:00"}
